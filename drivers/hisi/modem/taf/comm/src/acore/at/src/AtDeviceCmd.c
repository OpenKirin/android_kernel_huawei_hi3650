

/*****************************************************************************
  1 ¨ª¡¤???t¡ã¨¹o?
*****************************************************************************/
#include "AtParse.h"

#include "ATCmdProc.h"
#include "AtDeviceCmd.h"
#include "AtCheckFunc.h"
#include "mdrv.h"
#include "AtCmdMsgProc.h"

#include "phyoaminterface.h"

#include "AtInputProc.h"

#include "AtTestParaCmd.h"


//DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ start in 2012-04-12
#include "LNvCommon.h"
#include "RrcNvInterface.h"
#include "msp_nvim.h"
/* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ start in 2012-04-12 */

/* Added by l00167671 for NV2e¡¤????? , 2013-05-17, begin */
#include "NasNvInterface.h"
#include "TafNvInterface.h"
/* Added by l00167671 for NV2e¡¤????? , 2013-05-17, end*/

#include "AtCmdMiscProc.h"

#include "at_lte_common.h"

#include <linux/random.h>


/*****************************************************************************
    D-¨°¨¦??¡ä¨°¨®?¡ä¨°¦Ì?¡¤?¨º???¦Ì?.C???to¨º?¡§¨°?
*****************************************************************************/
/*lint -e767 -e960 DT??¨¨?:?T?¡§ 107747;?¨¬¨º¨®¨¨?:??¨¦¨´?a65952;?-¨°¨°:Log¡ä¨°¨®?*/
#define    THIS_FILE_ID        PS_FILE_ID_AT_DEVICECMD_C
/*lint +e767 +e960 DT??¨¨?:?T?¡§ 107747;?¨¬¨º¨®¨¨?:sunshaohua*/


/*****************************************************************************
  2 ¨¨???¡À?¨¢??¡§¨°?
*****************************************************************************/

/* ?¨¹¨¢?¨º¨¹?T¡À¨º??o¨º?¡§¨°??¦Ì?¡Â
#define CMD_TBL_E5_IS_LOCKED        (0x00000001)     2?¨º¨¹E5???¡§????¦Ì??¨¹¨¢?
#define CMD_TBL_PIN_IS_LOCKED       (0x00000002)     2?¨º¨¹PIN?????¡§????¦Ì??¨¹¨¢?
#define CMD_TBL_IS_E5_DOCK          (0x00000004)     E5 DOCK?¨¹¨¢?
#define CMD_TBL_CLAC_IS_INVISIBLE   (0x00000008)     +CLAC?¨¹¨¢??D2?¨º?3???¨º?¦Ì??¨¹¨¢?
*/

VOS_UINT32                 g_ulNVRD = 0;
VOS_UINT32                 g_ulNVWR = 0;

AT_PAR_CMD_ELEMENT_STRU g_astAtDeviceCmdTbl[] = {
    {AT_CMD_GTIMER,
    AT_SetGTimerPara,    AT_NOT_SET_TIME,    AT_QryGTimerPara,      AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^GTIMER",   (VOS_UINT8*)"(0-429496728)"},

    {AT_CMD_RSIM,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    AT_QryRsimPara,        AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^RSIM",     VOS_NULL_PTR},

    {AT_CMD_PHYNUM,
    AT_SetPhyNumPara,    AT_NOT_SET_TIME,    AT_QryPhyNumPara,      AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PHYNUM",   VOS_NULL_PTR},

    {AT_CMD_CSVER,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    At_QryCsVer,           AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^CSVER",    VOS_NULL_PTR},

    {AT_CMD_QOS,
    At_SetQosPara,       AT_NOT_SET_TIME,    At_QryQosPara,         AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
   AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^QOS",      VOS_NULL_PTR},

    {AT_CMD_SDOMAIN,
    At_SetSDomainPara,   AT_NOT_SET_TIME,    At_QrySDomainPara,     AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SDOMAIN",  VOS_NULL_PTR},

    {AT_CMD_DPACAT,
    At_SetDpaCat,        AT_NOT_SET_TIME,    At_QryDpaCat,          AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^DPACAT",   VOS_NULL_PTR},

    {AT_CMD_HSSPT,
    AT_SetHsspt  ,       AT_NOT_SET_TIME,    AT_QryHsspt,         AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^HSSPT",    (VOS_UINT8*)"(0,1,2,6)"},

    {AT_CMD_PLATFORM,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    At_QryPlatForm,        AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PLATFORM", VOS_NULL_PTR},

    {AT_CMD_BSN,
    At_SetBsn,           AT_NOT_SET_TIME,    At_QryBsn,             AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^BSN",      VOS_NULL_PTR},

/* Modify by c00172979 for V7¡ä¨²??¨ª?2?, 2012-04-13, Begin   */
/* Modify by c00172979 for V7¡ä¨²??¨ª?2?, 2012-04-13, End   */
    {AT_CMD_SFM,
    At_SetSfm,          AT_SET_PARA_TIME,   At_QrySfm,            AT_NOT_SET_TIME,    VOS_NULL_PTR , AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SFM",     (VOS_UINT8*)"(0,1)"},

    {AT_CMD_TMODE,
    At_SetTModePara,     AT_SET_PARA_TIME,   At_QryTModePara,       AT_QRY_PARA_TIME ,  At_TestTmodePara , AT_TEST_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^TMODE",    (VOS_UINT8*)"(0,1,2,3,4,11,12,13,14,15,16,17,18,19)"},

    /* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ start in 2012-04-12 */
    {AT_CMD_FCHAN,
    At_SetFChanPara,     AT_SET_PARA_TIME,   At_QryFChanPara,       AT_QRY_PARA_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_FCHAN_OTHER_ERR  ,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FCHAN",    (VOS_UINT8*)"(0-7),(0-255),(0-65535)"},
    /* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ end in 2012-04-12 */

    {AT_CMD_FTXON,
    At_SetFTxonPara,     AT_SET_PARA_TIME,   At_QryFTxonPara,       AT_QRY_PARA_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_FTXON_OTHER_ERR  ,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FTXON",    (VOS_UINT8*)"(0,1,2)"},

    /* Modify by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */
    {AT_CMD_FDAC,
    AT_SetFDac,          AT_SET_PARA_TIME,   AT_QryFDac,            AT_NOT_SET_TIME,    At_TestFdacPara , AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FDAC",     (VOS_UINT8*)"(0-65536)"},

    /* Modify by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, End   */

    {AT_CMD_FRXON,
    At_SetFRxonPara,     AT_SET_PARA_TIME,   At_QryFRxonPara,       AT_QRY_PARA_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_FRXON_OTHER_ERR  ,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FRXON",    (VOS_UINT8*)"(0-1)"},

    /* Modify by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */
    {AT_CMD_FPA,
    At_SetFpaPara,       AT_SET_PARA_TIME,   At_QryFpaPara,         AT_NOT_SET_TIME,    VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_FPA_OTHER_ERR  ,      CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FPA",      (VOS_UINT8*)"(0-255)"},

    /* Modify by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, End   */

    {AT_CMD_FLNA,
    At_SetFlnaPara,      AT_SET_PARA_TIME,   At_QryFlnaPara,        AT_QRY_PARA_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_FLNA_OTHER_ERR  ,     CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FLNA",     (VOS_UINT8*)"(0-255)"},

    {AT_CMD_FRSSI,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    At_QryFrssiPara,       AT_QRY_PARA_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FRSSI",    VOS_NULL_PTR},

    {AT_CMD_MDATE,
    AT_SetMDatePara,     AT_NOT_SET_TIME,    AT_QryMDatePara,       AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^MDATE",    (VOS_UINT8*)"(@time)"},

    {AT_CMD_FACINFO,
    AT_SetFacInfoPara,   AT_NOT_SET_TIME,    AT_QryFacInfoPara,     AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FACINFO",  (VOS_UINT8*)"(0,1),(@valueInfo)"},


    {AT_CMD_SD,
    At_SetSD,            AT_NOT_SET_TIME,    At_QrySD,              AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_SD_CARD_OTHER_ERR ,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SD",       (VOS_UINT8*)"(0-4),(0-429496728),(0-3)"},

    {AT_CMD_GPIOPL,
    At_SetGPIOPL,        AT_SET_PARA_TIME,   At_QryGPIOPL,          AT_QRY_PARA_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^GPIOPL",   (VOS_UINT8*)"(@GPIOPL)"},

    /* Add by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */
    /* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ start in 2012-04-12 */
    {AT_CMD_GETEXBANDINFO,
    AT_SetExbandInfoPara,      AT_NOT_SET_TIME,  VOS_NULL_PTR,            AT_NOT_SET_TIME,   VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,       CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^GETEXBANDINFO",     (VOS_UINT8*)"(101-116)"},

    {AT_CMD_GETEXBANDTESTINFO,
    AT_SetExbandTestInfoPara,      AT_NOT_SET_TIME, VOS_NULL_PTR ,     AT_NOT_SET_TIME,   VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,       CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^GETEXBANDTESTINFO",      (VOS_UINT8*)"(101-116),(14,50,100,150,200)"},
    /* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ end in 2012-04-12 */
    /* ¨¦¨²2¨²NV???¡ä */
    {AT_CMD_INFORRS,
    At_SetInfoRRS,       AT_SET_PARA_TIME,    VOS_NULL_PTR,          AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^INFORRS",  VOS_NULL_PTR},
    /* Add by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, End   */

    {AT_CMD_INFORBU,
    atSetNVFactoryBack,  AT_SET_PARA_TIME,    VOS_NULL_PTR,          AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^INFORBU",  VOS_NULL_PTR},

    {AT_CMD_DATALOCK,
    At_SetDataLock,      AT_SET_PARA_TIME,   At_QryDataLock,        AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^DATALOCK", (VOS_UINT8*)"(@nlockCode)"},

    {AT_CMD_VERSION,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    At_QryVersion,         AT_QRY_PARA_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^VERSION",  VOS_NULL_PTR},



    {AT_CMD_SIMLOCK,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    At_QrySimLockPlmnInfo, AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SIMLOCK",  VOS_NULL_PTR},

    {AT_CMD_MAXLCK_TIMES,
    At_SetMaxLockTimes,  AT_SET_PARA_TIME,   At_QryMaxLockTimes,    AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^MAXLCKTMS",(VOS_UINT8*)"(0-429496728)"},

    {AT_CMD_CALLSRV,
    At_SetCallSrvPara,   AT_NOT_SET_TIME,    At_QryCallSrvPara,     AT_NOT_SET_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^CALLSRV",  (VOS_UINT8*)"(0,1)"},

    {AT_CMD_CSDFLT,
    At_SetCsdfltPara,    AT_NOT_SET_TIME,    At_QryCsdfltPara,      AT_QRY_PARA_TIME,   VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR,                       CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^CSDFLT",   (VOS_UINT8*)"(0,1)"},

    {AT_CMD_SECUBOOTFEATURE,
    VOS_NULL_PTR,    AT_NOT_SET_TIME,    At_QrySecuBootFeaturePara, AT_NOT_SET_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SECUBOOTFEATURE",  (VOS_UINT8*)"(0-3)"},

    {AT_CMD_SECUBOOT,
    At_SetSecuBootPara,  AT_SET_PARA_TIME,    At_QrySecuBootPara,    AT_QRY_PARA_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SECUBOOT", (VOS_UINT8*)"(0-3)"},

    {AT_CMD_SETKEY,
    At_SetKeyPara,  AT_SET_PARA_TIME,    VOS_NULL_PTR,    AT_NOT_SET_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SETKEY", (VOS_UINT8*)"(1-4)"},

    {AT_CMD_GETKEYINFO,
    At_GetKeyInfoPara,  AT_SET_PARA_TIME,    VOS_NULL_PTR,    AT_NOT_SET_TIME,  VOS_NULL_PTR ,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^GETKEYINFO", (VOS_UINT8*)"(1-4)"},


    {AT_CMD_TMMI,
    AT_SetTmmiPara,      AT_NOT_SET_TIME,    AT_QryTmmiPara,        AT_NOT_SET_TIME,   At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^TMMI",  (VOS_UINT8*)"(0,1)"},

    /*DTS2012041102190 : h00135900 start in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/
    /* V7R1¨°a?¨®¨º1¨®?"=?"2¨¦?¡¥3?¦Ì?¨º1?¨¹¡Á¡ä¨¬? */
    {AT_CMD_TCHRENABLE,
    AT_SetChrgEnablePara,AT_NOT_SET_TIME,    AT_QryChrgEnablePara,  AT_NOT_SET_TIME,   AT_TestChrgEnablePara, AT_SET_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^TCHRENABLE",(VOS_UINT8*)"(0,1,4)"},
    /*DTS2012041102190 : h00135900 end in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/

    {AT_CMD_TCHRINFO,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    AT_QryChrgInfoPara,    AT_NOT_SET_TIME,   At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^TCHRINFO",VOS_NULL_PTR},

    {AT_CMD_TSCREEN,
    AT_SetTestScreenPara,AT_NOT_SET_TIME,    VOS_NULL_PTR,          AT_NOT_SET_TIME,   At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^TSCREEN",  (VOS_UINT8*)"(0-255),(0-255)"},

    {AT_CMD_BATVOL,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    AT_QryBatVolPara,      AT_QRY_PARA_TIME,  At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^TBATVOLT",  VOS_NULL_PTR},

    {AT_CMD_WUPWD,
    AT_SetWebPwdPara,    AT_NOT_SET_TIME,    VOS_NULL_PTR,          AT_NOT_SET_TIME,   At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WUPWD",  (VOS_UINT8*)"(0,1),(@WUPWD)"},

    {AT_CMD_PRODTYPE,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    AT_QryProdTypePara,    AT_QRY_PARA_TIME,  At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PRODTYPE",  VOS_NULL_PTR},

    {AT_CMD_FEATURE,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    AT_QryFeaturePara,     AT_QRY_PARA_TIME,  At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SFEATURE",  VOS_NULL_PTR},

    {AT_CMD_PRODNAME,
    AT_SetProdNamePara,  AT_NOT_SET_TIME,    AT_QryProdNamePara,    AT_NOT_SET_TIME,   At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PRODNAME",  (VOS_UINT8*)"(@ProductName)"},

    {AT_CMD_FWAVE,
    AT_SetFwavePara,     AT_SET_PARA_TIME,   VOS_NULL_PTR,          AT_NOT_SET_TIME,   At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FWAVE",  (VOS_UINT8*)"(0-7),(0-65535)"},

    {AT_CMD_EQVER,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,    AT_QryEqverPara,       AT_NOT_SET_TIME,   VOS_NULL_PTR,     AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^EQVER",  VOS_NULL_PTR},

    {AT_CMD_WIENABLE,
    AT_SetWiFiEnablePara, AT_NOT_SET_TIME, AT_QryWiFiEnablePara, AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIENABLE",(VOS_UINT8*)"(0,1,2)"},

    {AT_CMD_WIMODE,
    AT_SetWiFiModePara,   AT_NOT_SET_TIME, AT_QryWiFiModePara,   AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIMODE",  (VOS_UINT8*)"(0,1,2,3,4)"},

    {AT_CMD_WIBAND,
    AT_SetWiFiBandPara,   AT_NOT_SET_TIME, AT_QryWiFiBandPara,   AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIBAND",  (VOS_UINT8*)"(0,1)"},

    {AT_CMD_WIFREQ,
    AT_SetWiFiFreqPara,   AT_NOT_SET_TIME, AT_QryWiFiFreqPara,   AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIFREQ",  (VOS_UINT8*)"(0-65535),(@offset)"},

    {AT_CMD_WIRATE,
    AT_SetWiFiRatePara,   AT_NOT_SET_TIME, AT_QryWiFiRatePara,   AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIDATARATE",  (VOS_UINT8*)"(0-65535)"},

    /* Modified by L00171473 for DTS2012020106679,AT WT1¡è?? 2012-01-17  Begin */
    {AT_CMD_WIPOW,
    AT_SetWiFiPowerPara,  AT_NOT_SET_TIME, AT_QryWiFiPowerPara,  AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIPOW",    (VOS_UINT8*)"(0-65535)"},
    /* Modified by L00171473 for DTS2012020106679,AT WT1¡è?? 2012-01-17  End */

    {AT_CMD_WITX,
    AT_SetWiFiTxPara,     AT_NOT_SET_TIME, AT_QryWiFiTxPara,     AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WITX",     (VOS_UINT8*)"(0,1)"},

    {AT_CMD_WIRX,
    AT_SetWiFiRxPara,     AT_NOT_SET_TIME, AT_QryWiFiRxPara,     AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIRX",     (VOS_UINT8*)"(0,1),(@smac),(@dmac)"},

    {AT_CMD_WIRPCKG,
    AT_SetWiFiPacketPara, AT_NOT_SET_TIME, AT_QryWiFiPacketPara, AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIRPCKG",  (VOS_UINT8*)"(0)"},

    {AT_CMD_SSID,
    AT_SetWiFiSsidPara,   AT_NOT_SET_TIME, AT_QryWiFiSsidPara,   AT_NOT_SET_TIME, AT_TestSsidPara, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SSID",  (VOS_UINT8*)"(0-3),(@SSID)"},

    {AT_CMD_WIKEY,
    AT_SetWiFiKeyPara,    AT_NOT_SET_TIME, AT_QryWiFiKeyPara,    AT_NOT_SET_TIME, AT_TestWikeyPara, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIKEY",  (VOS_UINT8*)"(0-3),(@WIKEY)"},

    {AT_CMD_WILOG,
    AT_SetWiFiLogPara,    AT_NOT_SET_TIME, AT_QryWiFiLogPara,    AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WILOG",  (VOS_UINT8*)"(0,1),(@content)"},

    {AT_CMD_WIINFO,
    AT_SetWifiInfoPara,   AT_NOT_SET_TIME, VOS_NULL_PTR,         AT_NOT_SET_TIME, At_CmdTestProcERROR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIINFO",  (VOS_UINT8*)"(0,1),(0,1)"},

    {AT_CMD_WIPARANGE,
    AT_SetWifiPaRangePara, AT_NOT_SET_TIME, AT_QryWifiPaRangePara, AT_NOT_SET_TIME, AT_TestWifiPaRangePara, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^WIPARANGE",  (VOS_UINT8*)"(@gainmode)"},

    {AT_CMD_NVRD,
    AT_SetNVReadPara,     AT_SET_PARA_TIME,  VOS_NULL_PTR,        AT_NOT_SET_TIME,  VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^NVRD",(VOS_UINT8*)"(0-65535)"},

    {AT_CMD_NVWR,
    AT_SetNVWritePara,    AT_SET_PARA_TIME,  VOS_NULL_PTR,        AT_NOT_SET_TIME,  VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^NVWR",(VOS_UINT8*)"(0-65535),(0-2048),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data)"},
    /* Added by ?¦Ì¨®3?y/f62575 for AT Project, SIM?¡§¡À¡ê?¡è¡À¨º??¨¨¡¤¨¨?, 2011/11/15, begin */
	/* Added by s00217060 for ?¡Â?¡¥¨¦?¡À¡§AT?¨¹¨¢???????¨°??¨¢Co?, 2013-4-3, begin */

    {AT_CMD_NVWRPART,
    AT_SetNVWRPartPara,       AT_SET_PARA_TIME,  VOS_NULL_PTR,        AT_NOT_SET_TIME,  VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^NVWRPART",(VOS_UINT8*)"(0-65535),(0-2048),(0-2048),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data),(@data)"},


    {AT_CMD_CURC,
    At_SetCurcPara,      AT_NOT_SET_TIME,     At_QryCurcPara,     AT_QRY_PARA_TIME, VOS_NULL_PTR,    AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_ERROR, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^CURC", (VOS_UINT8*)"(0-2)"},
	/* Added by s00217060 for ?¡Â?¡¥¨¦?¡À¡§AT?¨¹¨¢???????¨°??¨¢Co?, 2013-4-3, end */
    /* Added by ?¦Ì¨®3?y/f62575 for AT Project, SIM?¡§¡À¡ê?¡è¡À¨º??¨¨¡¤¨¨?, 2011/11/15, end */

    /* Modify by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */

    {AT_CMD_SN,
    At_SetSnPara,        AT_NOT_SET_TIME,    VOS_NULL_PTR,           AT_NOT_SET_TIME,    At_CmdTestProcOK, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_DEVICE_OTHER_ERROR, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^SN",       VOS_NULL_PTR},

    /* Modify by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, End   */

    {AT_CMD_TBAT,
    AT_SetTbatPara,     AT_SET_PARA_TIME,   AT_QryTbatPara,  AT_QRY_PARA_TIME,  VOS_NULL_PTR, AT_SET_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^TBAT",    (VOS_UINT8 *)"(0,1),(0,1),(0-65535),(0-65535)"},

    {AT_CMD_PSTANDBY,
    AT_SetPstandbyPara,     AT_SET_PARA_TIME,   VOS_NULL_PTR,  AT_QRY_PARA_TIME,  VOS_NULL_PTR, AT_SET_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^PSTANDBY",    (VOS_UINT8 *)"(0-65535),(0-65535)"},

    {AT_CMD_WIWEP,
    AT_SetWiwepPara,        AT_SET_PARA_TIME,   AT_QryWiwepPara,  AT_QRY_PARA_TIME,  AT_TestWiwepPara, AT_SET_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^WIWEP",    (VOS_UINT8 *)"(0-3),(@wifikey),(0-3)"},

    {AT_CMD_CMDLEN,
    AT_SetCmdlenPara,        AT_SET_PARA_TIME,   AT_QryCmdlenPara,  AT_QRY_PARA_TIME,  At_CmdTestProcOK, AT_SET_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^CMDLEN",    (VOS_UINT8 *)"(0-65535),(0-65535)"},

    /*DTS2012041102190 : h00135900 start in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/
    {AT_CMD_TSELRF,
    AT_SetTseLrfPara,        AT_SET_PARA_TIME,   AT_QryTseLrfPara,  AT_QRY_PARA_TIME,  VOS_NULL_PTR, AT_SET_PARA_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^TSELRF",    (VOS_UINT8 *)"(0-255),(0-255)"},
    /*DTS2012041102190 : h00135900 end in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/

    {AT_CMD_HUK,
    AT_SetHukPara,              AT_SET_PARA_TIME,   VOS_NULL_PTR,   AT_NOT_SET_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^HUK",         (VOS_UINT8 *)"(@huk)"},

    {AT_CMD_FACAUTHPUBKEY,
    VOS_NULL_PTR,               AT_NOT_SET_TIME,    VOS_NULL_PTR,   AT_NOT_SET_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FACAUTHPUBKEY",       (VOS_UINT8 *)"(@Pubkey)"},

    {AT_CMD_IDENTIFYSTART,
    AT_SetIdentifyStartPara,    AT_SET_PARA_TIME,   VOS_NULL_PTR,   AT_NOT_SET_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^IDENTIFYSTART",       (VOS_UINT8 *)"(@Rsa)"},

    {AT_CMD_IDENTIFYEND,
    AT_SetIdentifyEndPara,      AT_SET_PARA_TIME,   VOS_NULL_PTR,   AT_NOT_SET_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^IDENTIFYEND",       VOS_NULL_PTR},

    {AT_CMD_SIMLOCKDATAWRITE,
    VOS_NULL_PTR,               AT_NOT_SET_TIME,    VOS_NULL_PTR,   AT_NOT_SET_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SIMLOCKDATAWRITE",    (VOS_UINT8 *)"(@SimlockData)"},

    {AT_CMD_PHONESIMLOCKINFO,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,    AT_QryPhoneSimlockInfoPara, AT_QRY_PARA_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PHONESIMLOCKINFO",    VOS_NULL_PTR},

    {AT_CMD_SIMLOCKDATAREAD,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,    AT_QrySimlockDataReadPara,  AT_QRY_PARA_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SIMLOCKDATAREAD",     VOS_NULL_PTR},

    {AT_CMD_PHONEPHYNUM,
    AT_SetPhonePhynumPara,  AT_SET_PARA_TIME,    AT_QryPhonePhynumPara,  AT_QRY_PARA_TIME,   AT_TestHsicCmdPara,   AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PHONEPHYNUM",         (VOS_UINT8 *)"(@type),(@Phynum)"},

    {AT_CMD_PORTCTRLTMP,
    AT_SetPortCtrlTmpPara,          AT_SET_PARA_TIME,   AT_QryPortCtrlTmpPara,  AT_NOT_SET_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PORTCTRLTMP",    (VOS_UINT8 *)"(@password)"},

    {AT_CMD_PORTATTRIBSET,
    AT_SetPortAttribSetPara,          AT_SET_PARA_TIME,   AT_QryPortAttribSetPara,  AT_QRY_PARA_TIME,  AT_TestHsicCmdPara,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^PORTATTRIBSET",    (VOS_UINT8 *)"(0,1),(@password)"},

    {AT_CMD_SIMLOCKUNLOCK,
    AT_SetSimlockUnlockPara, AT_SET_PARA_TIME,  VOS_NULL_PTR,   AT_NOT_SET_TIME,    AT_TestSimlockUnlockPara, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS,    CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SIMLOCKUNLOCK",    (VOS_UINT8 *)"(\"NET\",\"NETSUB\",\"SP\"),(pwd)"},

    {AT_CMD_FPLLSTATUS,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,    AT_QryFPllStatusPara,  AT_QRY_PARA_TIME,  VOS_NULL_PTR,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FPLLSTATUS",     (VOS_UINT8 *)"(0,1),(0,1)"},

    {AT_CMD_FPOWDET,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,    AT_QryFpowdetTPara,  AT_QRY_PARA_TIME,  VOS_NULL_PTR,  AT_NOT_SET_TIME,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^FPOWDET",     VOS_NULL_PTR},

    {AT_CMD_NVWRSECCTRL,
    AT_SetNvwrSecCtrlPara,  AT_SET_PARA_TIME,   AT_QryNvwrSecCtrlPara,  AT_NOT_SET_TIME,   At_CmdTestProcOK,   AT_NOT_SET_TIME,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^NVWRSECCTRL",   (VOS_UINT8*)"(0-2),(@SecString)"},


    {AT_CMD_MIPIWR,
    AT_SetMipiWrPara,  AT_SET_PARA_TIME, VOS_NULL_PTR, AT_NOT_SET_TIME, VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^MIPIWR",  (TAF_UINT8*)"(0-9),(0-15),(0-255),(0-65535),(0-3)"},/*mode, slave_id,  address, data,channel*/

   {AT_CMD_MIPIRD,
    AT_SetMipiRdPara,  AT_SET_PARA_TIME, VOS_NULL_PTR, AT_NOT_SET_TIME, VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,        AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^MIPIRD",  (TAF_UINT8*)"(0-9),(0-1),(0-15),(0-255)"},

   {AT_CMD_SSIWR,
    AT_SetSSIWrPara, AT_SET_PARA_TIME, VOS_NULL_PTR, AT_QRY_PARA_TIME, VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^SSIWR",  (TAF_UINT8*)"(0-9),(0-1),(0-255),(0-65535)"}, /*mode, channel, address, data*/

    {AT_CMD_SSIRD,
    AT_SetSSIRdPara, AT_SET_PARA_TIME, VOS_NULL_PTR, AT_QRY_PARA_TIME, VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (TAF_UINT8*)"^SSIRD",  (TAF_UINT8*)"(0-9),(0-1),(0-255)"},/*mode, channel, address*/



    {AT_CMD_SECURESTATE,
    AT_SetSecureStatePara,   AT_NOT_SET_TIME,   AT_QrySecureStatePara,   AT_NOT_SET_TIME,   VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SECURESTATE", (VOS_UINT8*)"(0-2)"},

    {AT_CMD_KCE,
    AT_SetKcePara,   AT_NOT_SET_TIME,   VOS_NULL_PTR,   AT_NOT_SET_TIME,   VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^KCE", (VOS_UINT8*)"(@KceString)"},

    {AT_CMD_SOCID,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,   AT_QrySocidPara,   AT_NOT_SET_TIME,   VOS_NULL_PTR, AT_NOT_SET_TIME,
    VOS_NULL_PTR,   AT_NOT_SET_TIME,
    AT_CME_INCORRECT_PARAMETERS, CMD_TBL_PIN_IS_LOCKED,
    (VOS_UINT8*)"^SOCID", (VOS_UINT8*)"(@SocidString)"}

};


/* ¨º?¨¤y: ^CMDX ?¨¹¨¢?¨º?2?¨º¨¹E5?¨¹??¡À¡ê?¡è?¨¹¨¢?¡ê??¨°?¨²+CLAC¨¢D?¨´?¨´¨®D?¨¹¨¢?¨º¡À2???¨º?¡ê?¦Ì¨²¨°???2?¨ºy¨º?2?¡ä???¨°yo?¦Ì?¡Á?¡¤?¡ä?,
        ¦Ì¨²?t??2?¨ºy¨º?¡ä???¨°yo?¦Ì?¡Á?¡¤?¡ä?¡ê?¦Ì¨²¨¨y??2?¨ºy¨º???¨ºyD¨ª2?¨ºy

   !!!!!!!!!!!¡Á¡é¨°a: param1o¨ªparam2¨º?¨º?¨¤y¡ê?¨º¦Ì?¨º?¡§¨°??¨¹¨¢?¨º¡À¨®|??¨¢??¡§¨°?¦Ì??¨°?¨¬(?¨¦¨¬¨¢???a??D¡ì?¨º)!!!!!!!!!!!!!

    {AT_CMD_CMDX,
    At_SetCmdxPara, AT_SET_PARA_TIME, At_QryCmdxPara, AT_QRY_PARA_TIME, At_TestCmdxPara, AT_NOT_SET_TIME,
    AT_ERROR, CMD_TBL_E5_IS_LOCKED | CMD_TBL_CLAC_IS_INVISIBLE,
    (VOS_UINT8*)"^CMDX", (VOS_UINT8*)"(@param1),(param2),(0-255)"},
*/


/*****************************************************************************
  3 o¡¥¨ºy¨º¦Ì??
*****************************************************************************/

/*****************************************************************************
 º¯ Êý Ãû  : At_QrySecuBootFeaturePara
 ¹¦ÄÜÃèÊö  : ²éÑ¯µ¥°åÈí¼þÊÇ·ñÊÇSecure Boot °æ±¾£¬ÊÇ·ñÐèÒªÆô¶¯Secure Boot ¹¦ÄÜ
 ÊäÈë²ÎÊý  : ÎÞ
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32 AT_OK²éÑ¯²Ù×÷³É¹¦£¬AT_ERROR²éÑ¯²Ù×÷Ê§°Ü
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 ÐÞ¸ÄÀúÊ·      :
  1.ÈÕ    ÆÚ   : 2010Äê12ÔÂ18ÈÕ
    ×÷    Õß   : ¸µÓ³¾ý/f62575
    ÐÞ¸ÄÄÚÈÝ   : ÐÂÉú³Éº¯Êý

  2.ÈÕ    ÆÚ   : 2011Äê10ÔÂ6ÈÕ
    ×÷    Õß   : ÎâÃô/w00181244
    ÐÞ¸ÄÄÚÈÝ   : º¯ÊýÖØ¹¹£¬½«Ö±½Óµ÷ÓÃµ×ÈíAPI¸ÄÎª·¢ÏûÏ¢µ½CºËµ÷ÓÃµ×ÈíAPI

  3.ÈÕ    ÆÚ   : 2012Äê08ÔÂ08ÈÕ
    ×÷    Õß   : y00213812
    ÐÞ¸ÄÄÚÈÝ   : ¸ù¾ÝDTS2012082100431ÐÞ¸Ä£¬Ö±½Ó¶ÁÈ¡NVÏî
  4.ÈÕ    ÆÚ   : 2012Äê12ÔÂ13ÈÕ
    ×÷    Õß   : L00171473
    ÐÞ¸ÄÄÚÈÝ   : DTS2012121802573, TQEÇåÀí
  5.ÈÕ    ÆÚ   : 2014Äê12ÔÂ15ÈÕ
    ×÷    Õß   : Z00306637
    ÐÞ¸ÄÄÚÈÝ   : DTS2014120903868, Ö±½Óµ÷ÓÃµ×ÈíAPI
  6.ÈÕ    ÆÚ   : 2016Äê01ÔÂ26ÈÕ
    ×÷    Õß   : w00249971
    ÐÞ¸ÄÄÚÈÝ   : DTS2016012510143, mbbÀ©Õ¹¸ÃAT£¬Ê¹Ö®Ö§³ÖDX°²È«ÒýÇæ¼ÓÃÜ
*****************************************************************************/
VOS_UINT32 At_QrySecuBootFeaturePara( VOS_UINT8 ucIndex )
{
    VOS_UINT8                          usSecBootSupportedFlag;
    usSecBootSupportedFlag = 0;

    /* µ÷ÓÃµ×Èí½Ó¿Ú */
    if(MDRV_OK != mdrv_crypto_secboot_supported(&usSecBootSupportedFlag))
    {
        AT_WARN_LOG("At_QrySecuBootFeaturePara: get mdrv_crypto_secboot_supported() failed");
        return AT_ERROR;
    }


    /* ´òÓ¡Êä³ö */
    gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                            (VOS_CHAR *)pgucAtSndCodeAddr,
                                            (VOS_CHAR *)pgucAtSndCodeAddr,
                                            "%s: %d",
                                            g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                            usSecBootSupportedFlag);

    return AT_OK;
}

/*****************************************************************************
 º¯ Êý Ãû  : AT_SetSecDbgState
 ¹¦ÄÜÃèÊö  : °´ÕÕ°²È«²úÆ·ÉèÖÃÖ¸µ¼Êé£¬ÉèÖÃÏàÓ¦debugÈ¨ÏÞ
 ÊäÈë²ÎÊý  : VOS_UINT8 ucIndex
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32 AT_OK²Ù×÷³É¹¦£¬AT_ERROR²Ù×÷Ê§°Ü
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 ÐÞ¸ÄÀúÊ·      :
  1.ÈÕ    ÆÚ   : 2016Äê4ÔÂ14ÈÕ
    ×÷    Õß   : w00249971
    ÐÞ¸ÄÄÚÈÝ   : ÐÂÉú³Éº¯Êý

*****************************************************************************/
VOS_INT32 AT_SetSecDbgState(VOS_VOID)
{
    VOS_INT32               usResult;

    /*1.Ö´ÐÐSECUREDEBUG=3,ÉèÖÃ°²È«DEBUGÊÚÈ¨ÓÉ°²È«Ö¤Êé¿ØÖÆ*/
    usResult = mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_SET_SECUREDEBUG,
                                AT_SECUREDEBUG_VALUE,
                                NULL,
                                0);

    /*ÉèÖÃ½Ó¿ÚÖ»ÓÐÈýÖÖ·µ»ØÖµ£¬<0,Ö´ÐÐ´íÎó£»=0£¬Ö´ÐÐÕýÈ·£»=1£¬ÖØ¸´ÉèÖÃ£»
      ËùÒÔÕâÀïÖ»ÅÐ¶Ï·µ»Ø´íÎóÇé¿ö*/
    if(MDRV_OK > usResult)
    {
        AT_WARN_LOG("AT_SetSecuState: set SECUREDEBUG state error.\n");
        return AT_ERROR;
    }

    /*2.Ö´ÐÐSECDBGRESET=1ºÍCSRESET=1,ÔÚ¶Ô°²È«ÊÀ½çºÍCoresightµ÷ÊÔÊ±£¬
        ÁÙÊ±¸´Î»SecEngine*/
    usResult = mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_SET_CSRESET,
                                AT_CSRESET_VALUE,
                                NULL,
                                0);
    if(MDRV_OK > usResult)
    {
        AT_WARN_LOG("AT_SetSecuState: set CSRESET state error.\n");
        return AT_ERROR;
    }

    /*3.Ö´ÐÐDFTSEL=1 ¿ÉÒÔÍ¨¹ýÃÜÂëÑéÖ¤·½Ê½¿ªÆô°²È«DFT¹¦ÄÜ*/
    usResult = mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_SET_DFTSEL,
                                AT_DFTSEL_VALUE,
                                NULL,
                                0);
    if(MDRV_OK > usResult)
    {
        AT_WARN_LOG("AT_SetSecuState: set CSRESET state error.\n");
        return AT_ERROR;
    }

    return AT_OK;
}

/*****************************************************************************
 º¯ Êý Ãû  : At_SetSecuBootPara
 ¹¦ÄÜÃèÊö  : Ê¹ÄÜSecure Boot ¹¦ÄÜ
 ÊäÈë²ÎÊý  : VOS_UINT8 ucIndex
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32 AT_OKÊ¹ÄÜ²Ù×÷³É¹¦£¬AT_ERRORÊ¹ÄÜ²Ù×÷Ê§°Ü
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 ÐÞ¸ÄÀúÊ·      :
  1.ÈÕ    ÆÚ   : 2010Äê12ÔÂ18ÈÕ
    ×÷    Õß   : ¸µÓ³¾ý/f62575
    ÐÞ¸ÄÄÚÈÝ   : ÐÂÉú³Éº¯Êý
  2.ÈÕ    ÆÚ   : 2011Äê3ÔÂ21ÈÕ
    ×÷    Õß   : h44270
    ÐÞ¸ÄÄÚÈÝ   : DTS2011031601921,Ö»ÓÐÆô¶¯Ó²¼þ¼ÓÃÜµÄÇé¿öÏÂ£¬²ÅÄÜÉèÖÃ
  3.ÈÕ    ÆÚ   : 2012Äê02ÔÂ06ÈÕ
    ×÷    Õß   : ¸µÓ³¾ý/f62575
    ÐÞ¸ÄÄÚÈÝ   : º¯ÊýÖØ¹¹,½«Ö±½Óµ÷ÓÃµ×ÈíAPI¸ÄÎª·¢ÏûÏ¢µ½CºËµ÷ÓÃµ×ÈíAPI
  4.ÈÕ    ÆÚ   : 2014Äê12ÔÂ15ÈÕ
    ×÷    Õß   : Z00306637
    ÐÞ¸ÄÄÚÈÝ   : DTS2014120903868, Ö±½Óµ÷ÓÃµ×ÈíAPI
  5.ÈÕ    ÆÚ   : 2016Äê01ÔÂ21ÈÕ
    ×÷    Õß   : w00249971
    ÐÞ¸ÄÄÚÈÝ   : DTS2016012510143, mbbÀ©Õ¹¸ÃAT£¬Ê¹Ö®Ö§³ÖDX°²È«ÒýÇæ¼ÓÃÜ
*****************************************************************************/
VOS_UINT32 At_SetSecuBootPara(VOS_UINT8 ucIndex)
{
    if ((1 != gucAtParaIndex)
        || (0 == gastAtParaList[0].usParaLen))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if (AT_DX_SECURE_STATE < gastAtParaList[0].ulParaValue)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    switch(gastAtParaList[0].ulParaValue)
    {
        case AT_NO_DX_SECU_ENABLE_STATE:
        {
            if (MDRV_OK != mdrv_crypto_start_secure())
            {
                AT_WARN_LOG("At_SetSecuBootPara: mdrv_crypto_start_secure() failed");
                return AT_ERROR;
            }
            break;
        }
        case AT_DX_RMA_STATE:
        {
            /*ÏÈ»ñÈ¡ÏÂÐ¾Æ¬×´Ì¬£¬Èç¹ûÒÑ¾­ÉèÖÃÎªRMA×´Ì¬£¬Ö±½Ó·µ»Øok*/
            if(AT_DRV_STATE_RMA == mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_GET_SECURESTATE,
                                                    0, NULL, 0))
            {
                AT_WARN_LOG("At_SetSecuBootPara: chip is already set to RMA state");
                return AT_OK;
            }

            if (MDRV_OK != mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_SET_SECURESTATE,
                                            AT_SET_RMA_STATE, NULL, 0))
            {
                AT_WARN_LOG("At_SetSecuBootPara: SET_SECURE_DISABLED_STATE  failed");
                return AT_ERROR;
            }
            break;
        }
        case AT_DX_SECURE_STATE:
        {
            /*°²È«×´Ì¬ÒÑ¾­ÔÚFastbootÀïÉèÖÃ£¬ÕâÀïcheckÏÂ£¬ÒÔ±£Ö¤²úÏßÁ÷³ÌOK*/
            if(AT_DRV_STATE_SECURE != mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_GET_SECURESTATE,
                                                       0, NULL, 0))
            {
                AT_WARN_LOG("At_SetSecuBootPara: chip don't set to SECURE state");
                return AT_ERROR;
            }
            if (AT_OK != AT_SetSecDbgState())
            {
                return AT_ERROR;
            }
            break;
        }
        default:
        {
            return AT_CME_INCORRECT_PARAMETERS;
        }
    }

    return AT_OK;
}

/*****************************************************************************
 º¯ Êý Ãû  : At_QrySecuBootPara
 ¹¦ÄÜÃèÊö  : ²éÑ¯Secure Boot ¹¦ÄÜÊ¹ÄÜ×´Ì¬
 ÊäÈë²ÎÊý  : VOS_UINT8 ucIndex
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32 AT_OK²éÑ¯²Ù×÷³É¹¦£¬AT_ERROR²éÑ¯²Ù×÷Ê§°Ü
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 ÐÞ¸ÄÀúÊ·      :
  1.ÈÕ    ÆÚ   : 2010Äê12ÔÂ18ÈÕ
    ×÷    Õß   : ¸µÓ³¾ý/f62575
    ÐÞ¸ÄÄÚÈÝ   : ÐÂÉú³Éº¯Êý

  2.ÈÕ    ÆÚ   : 2011Äê10ÔÂ17ÈÕ
    ×÷    Õß   : ÎâÃô/w00181244
    ÐÞ¸ÄÄÚÈÝ   : º¯ÊýÖØ¹¹,½«Ö±½Óµ÷ÓÃµ×ÈíAPI¸ÄÎª·¢ÏûÏ¢µ½CºËµ÷ÓÃµ×ÈíAPI
  3.ÈÕ    ÆÚ   : 2014Äê12ÔÂ15ÈÕ
    ×÷    Õß   : Z00306637
    ÐÞ¸ÄÄÚÈÝ   : DTS2014120903868, Ö±½Óµ÷ÓÃµ×ÈíAPI
  4.ÈÕ    ÆÚ   : 2016Äê01ÔÂ26ÈÕ
    ×÷    Õß   : w00249971
    ÐÞ¸ÄÄÚÈÝ   : DTS2016012510143, mbbÀ©Õ¹¸ÃAT£¬Ê¹Ö®Ö§³ÖDX°²È«ÒýÇæ¼ÓÃÜ
*****************************************************************************/
VOS_UINT32 At_QrySecuBootPara(VOS_UINT8 ucIndex)
{
    VOS_UINT8                           usSecBootStartedFlag;

    usSecBootStartedFlag = 0;

    if(MDRV_OK != mdrv_crypto_sec_started(&usSecBootStartedFlag))
    {
        AT_WARN_LOG("At_QrySecuBootPara: get mdrv_crypto_sec_started() failed");
        return AT_ERROR;
    }

/*¶ÔÓÚÖ§³ÖDX°²È«ÒýÇæµÄ£¬ÐèÒª²éÑ¯Ð¾Æ¬×´Ì¬*/

    /* ´òÓ¡Êä³ö */
    gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                            (VOS_CHAR *)pgucAtSndCodeAddr,
                                            (VOS_CHAR *)pgucAtSndCodeAddr,
                                            "%s: %d",
                                            g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                            usSecBootStartedFlag);

     return AT_OK;

}

/*****************************************************************************
 º¯ Êý Ãû  : At_SetKeyPara
 ¹¦ÄÜÃèÊö  : ÉèÖÃkey Öµ£¬¾ßÌåkeyÓÉ²ÎÊý¾ö¶¨
 ÊäÈë²ÎÊý  : VOS_UINT8 ucIndex
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32 AT_OK²éÑ¯²Ù×÷³É¹¦£¬AT_ERROR²éÑ¯²Ù×÷Ê§°Ü
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 ÐÞ¸ÄÀúÊ·      :
  1.ÈÕ    ÆÚ   : 2016Äê4ÔÂ14ÈÕ
    ×÷    Õß   : w00249971
    ÐÞ¸ÄÄÚÈÝ   : ÐÂÉú³Éº¯Êý
*****************************************************************************/
VOS_UINT32 At_SetKeyPara(VOS_UINT8 ucIndex)
{
    VOS_INT32                           usRet;
    VOS_UINT8                           aulKeyBuf[AT_AUTHKEY_LEN];

    if ((1 != gucAtParaIndex)
     || (0 == gastAtParaList[0].usParaLen))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if (AT_KEY_TYPE_BUTT <= gastAtParaList[0].ulParaValue)
    {
        AT_WARN_LOG("At_SetKeyPara: not support the para,pls check\n");
        return AT_CME_INCORRECT_PARAMETERS;
    }

    PS_MEM_SET(aulKeyBuf, 0, sizeof(aulKeyBuf));

    switch(gastAtParaList[0].ulParaValue)
    {
        case AT_KEY_TYPE_DIEID:
        case AT_KEY_TYPE_TBOX_SMS:
        case AT_KEY_TYPE_SOCID:
            break;
        case AT_KEY_TYPE_AUTHKEY:
        {
            get_random_bytes(aulKeyBuf, AT_AUTHKEY_LEN);

            usRet = mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_SET_AUTHKEY,
                                     0,
                                     aulKeyBuf,
                                     AT_AUTHKEY_LEN);
            if(MDRV_OK != usRet)
            {
                AT_WARN_LOG("At_SetKeyPara: mdrv_set_authkey error.\n");
                return AT_ERROR;
            }
            break;
        }
        default:
        {
            AT_WARN_LOG("At_SetKeyPara: para is error,pls check.\n");
            return AT_CME_INCORRECT_PARAMETERS;
        }
    }
    return AT_OK;
}

/*****************************************************************************
 º¯ Êý Ãû  : At_GetKeyInfoPara
 ¹¦ÄÜÃèÊö  : ²éÑ¯key Öµ£¬¾ßÌåkeyÓÉ²ÎÊý¾ö¶¨
 ÊäÈë²ÎÊý  : VOS_UINT8 ucIndex
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32 AT_OK²éÑ¯²Ù×÷³É¹¦£¬AT_ERROR²éÑ¯²Ù×÷Ê§°Ü
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 ÐÞ¸ÄÀúÊ·      :
  1.ÈÕ    ÆÚ   : 2016Äê4ÔÂ14ÈÕ
    ×÷    Õß   : w00249971
    ÐÞ¸ÄÄÚÈÝ   : ÐÂÉú³Éº¯Êý
*****************************************************************************/
VOS_UINT32 At_GetKeyInfoPara(VOS_UINT8 ucIndex)
{
    VOS_INT                 iResult;
    VOS_UINT16              usLength;
    VOS_UINT16              usKeyLen;
    VOS_UINT8               auckeybuf[AT_KEYBUFF_LEN];
    VOS_UINT8               usHashbuf[AT_KEY_HASH_LEN];
    VOS_UINT32              i;


    if (1 != gucAtParaIndex || (0 == gastAtParaList[0].usParaLen))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if (AT_KEY_TYPE_BUTT <= gastAtParaList[0].ulParaValue)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* ¾Ö²¿±äÁ¿³õÊ¼»¯ */
    PS_MEM_SET(usHashbuf, 0x00, AT_KEY_HASH_LEN);
    PS_MEM_SET(auckeybuf, 0x00, AT_KEYBUFF_LEN);

    switch(gastAtParaList[0].ulParaValue)
    {
        case AT_KEY_TYPE_DIEID:
        case AT_KEY_TYPE_TBOX_SMS:
        {
            /*´ò×®£¬ÔÝ²»´¦Àí*/
            return AT_OK;
        }
        case AT_KEY_TYPE_SOCID:
        {
            usKeyLen = AT_SOCID_LEN;
            iResult = mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_GET_SOCID,
                                       0,
                                       auckeybuf,
                                       AT_SOCID_LEN);

            /* ´¦ÀíÒì³£²éÑ¯½á¹û */
            if (MDRV_OK != iResult)
            {
                AT_WARN_LOG("At_QryGetKeyInfoPara:get soc id error.\n");
                return AT_ERROR;
            }
            break;
        }
        case AT_KEY_TYPE_AUTHKEY:
        {
            usKeyLen = AT_AUTHKEY_LEN;
            iResult = mdrv_efuse_ioctl(MDRV_EFUSE_IOCTL_CMD_GET_AUTHKEY,
                                       0,
                                       auckeybuf,
                                       AT_AUTHKEY_LEN);
            if(MDRV_OK != iResult)
            {
                AT_WARN_LOG("At_QryGetKeyInfoPara:get authkey error.\n");
                return AT_ERROR;
            }
            break;
        }
        default:
        {
            return AT_CME_INCORRECT_PARAMETERS;
        }

    }

    /*¼ÆËãhashÖµ,»ùÏß´ò×®£¬²úÆ·ÏßÊÊÅä*/
    /*
    iResult = mdrv_crypto_hash256(auckeybuf, usKeyLen, usHashbuf);
    if(MDRV_OK != iResult)
    {
        AT_WARN_LOG("At_QryGetKeyInfoPara:get hash error.\n");
        return AT_ERROR;
    } */

    /* ´òÓ¡Êä³öATÃû³Æ */
    usLength = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                     (VOS_CHAR *)pgucAtSndCodeAddr,
                                     (VOS_CHAR *)pgucAtSndCodeAddr,
                                      "%s:%s",
                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                     gaucAtCrLf);

    /*key info*/
    for(i = 0; i < usKeyLen; i++)
    {
        usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                         (VOS_CHAR *)pgucAtSndCodeAddr,
                                         (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                          "%02X",
                                          auckeybuf[i]);

    }
    /*key len*/
    usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                         (VOS_CHAR *)pgucAtSndCodeAddr,
                                         (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                          ",%d,",
                                          usKeyLen * 2);
    /*key hash*/
    for(i = 0; i < AT_KEY_HASH_LEN; i++)
    {
        usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                         (VOS_CHAR *)pgucAtSndCodeAddr,
                                         (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                          "%02x",
                                          usHashbuf[i]);

    }
    gstAtSendData.usBufLen = usLength;
    return AT_OK;
}

/*****************************************************************************
 º¯ Êý Ãû  : At_TestTmodePara
 ¹¦ÄÜÃèÊö  : TMODE²âÊÔº¯Êý
 ÊäÈë²ÎÊý  : VOS_UINT8 ucIndex
 Êä³ö²ÎÊý  : ÎÞ
 ·µ »Ø Öµ  : VOS_UINT32
 µ÷ÓÃº¯Êý  :
 ±»µ÷º¯Êý  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2011?¨º10??9¨¨?
    ¡Á¡Â    ??   : w00181244
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 At_TestTmodePara(VOS_UINT8 ucIndex)
{
    VOS_UINT16                          usLength;

    usLength = 0;

    usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                  (VOS_CHAR *)pgucAtSndCodeAddr,
                                  (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                  "%s: %d",
                                  g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                  g_stAtDevCmdCtrl.ucCurrentTMode);

    gstAtSendData.usBufLen = usLength;

    return AT_OK;

}

/*****************************************************************************
 o¡¥ ¨ºy ??  : At_TestFdacPara
 1|?¨¹?¨¨¨º?  : FDAC2a¨º?o¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2011?¨º10??9¨¨?
    ¡Á¡Â    ??   : w00181244
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 At_TestFdacPara(VOS_UINT8 ucIndex)
{
    VOS_UINT16                          usLength;

    usLength  = 0;

    if ((AT_RAT_MODE_WCDMA == g_stAtDevCmdCtrl.ucDeviceRatMode)
     || (AT_RAT_MODE_AWS == g_stAtDevCmdCtrl.ucDeviceRatMode))
    {
        usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                          (VOS_CHAR *)pgucAtSndCodeAddr,
                                          (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                          "%s: (0-2047)",
                                          g_stParseContext[ucIndex].pstCmdElement->pszCmdName);
    }
    else
    {
        usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                          (VOS_CHAR *)pgucAtSndCodeAddr,
                                          (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                          "%s: (0-1023)",
                                          g_stParseContext[ucIndex].pstCmdElement->pszCmdName);
    }
    gstAtSendData.usBufLen = usLength;

    return AT_OK;

}

/*****************************************************************************
 o¡¥ ¨ºy ??  : At_RegisterDeviceCmdTable
 1|?¨¹?¨¨¨º?  : ¡Á¡é2¨¢¡Á¡ã¡À??¨¹¨¢?¡À¨ª
 ¨º?¨¨?2?¨ºy  : VOS_VOID
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2011?¨º10??21¨¨?
    ¡Á¡Â    ??   : ?3¨¢?/l60609
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 At_RegisterDeviceCmdTable(VOS_VOID)
{
    return AT_RegisterCmdTable(g_astAtDeviceCmdTbl, sizeof(g_astAtDeviceCmdTbl)/sizeof(g_astAtDeviceCmdTbl[0]));
}


/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_TestSsidPara
 1|?¨¹?¨¨¨º?  : SSID2a¨º??¨¹¨¢?
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2011?¨º10??28¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º9??17¨¨?
    ¡Á¡Â    ??   : z60575
    DT???¨²¨¨Y   : MULTI_SSIDDT??
*****************************************************************************/
VOS_UINT32 AT_TestSsidPara(VOS_UINT8 ucIndex)
{
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI))
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    gstAtSendData.usBufLen = (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    "%s:%d",
                                                    g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                    AT_WIFI_MAX_SSID_NUM);
    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_TestWikeyPara
 1|?¨¹?¨¨¨º?  : WIKEY2a¨º??¨¹¨¢?
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2011?¨º10??28¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_TestWikeyPara(VOS_UINT8 ucIndex)
{
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI) )
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    gstAtSendData.usBufLen = (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    "%s:%d",
                                                    g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                    AT_WIFI_KEY_NUM);
    return AT_OK;
}


/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetTbatPara
 1|?¨¹?¨¨¨º?  : ^TBAT¨¦¨¨???¨¹¨¢?
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
 2.¨¨?    ?¨²   : 2012?¨º03??03¨¨?
   ¡Á¡Â    ??   : s62952
   DT???¨²¨¨Y   : BalongV300R002 Build¨®??¡¥????:¨¦?3yFEATURE_CHARGEo¨º

*****************************************************************************/
VOS_UINT32 AT_SetTbatPara(VOS_UINT8 ucIndex)
{
    return atSetTBATPara(ucIndex);

    /*
    ?¨´?Y2?¨ºy2?¨ª???DD??¨º?2¨´¡Á¡Â:
    1.  ?¡ì3?¨®??¡ì¨º?¨¨?AT^TBAT=1,0??¨¨?¦Ì?3?¦Ì??1¨ºy¡Á??¦Ì¡ê?
    ¦Ì¡Â¨®?¦Ì¡Á¨¨¨ª/OM?¨®?¨²??¨¨?¦Ì?3?¨ºy¡Á??¦Ì
    2.  ?¡ì3?¨®??¡ì¨º?¨¨?AT^TBAT=1,1,<value1>,<value2>¨¦¨¨??¦Ì?3?¦Ì??1¨ºy¡Á??¦Ì¡ê?¨®?¨®¨²¦Ì?3?D¡ê¡Á?¡ê?
    D¡äD¡ê¡Á?¦Ì??1¦Ì?NVID 90(en_NV_Item_BATTERY_ADC)¡ê?¡ä?¡ä|¨®D¨°¨¦?¨º¡äy¨¨¡¤¨¨?¡ê?
    en_NV_Item_BATTERY_ADC?D????¦Ì?¨º???¨º?¨¢????¦Ì¡ê???AT?¨¹¨¢???¨°???2?¨ºy¡ê?¨¨?o?¨®3¨¦?
    3.4V ¦Ì??1??¨®|¦Ì?ADC?¦Ì
    4.2V ¦Ì??1??¨®|¦Ì?ADC?¦Ì
    */
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryTbatPara
 1|?¨¹?¨¨¨º?  : ^TBAT2¨¦?¡¥?¨¹¨¢?¡ê?¨®?¨®¨²??¨¨?¦Ì?3?¦Ì?¡ã2¡Á¡ã¡¤?¨º?
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_QryTbatPara(VOS_UINT8 ucIndex)
{
    /*
    ¦Ì¡Â¨®?¦Ì¡Á¨¨¨ª?¨®?¨²??¨¨?¦Ì?3?¡ã2¡Á¡ã¡¤?¨º?:
    <mount type> ¦Ì?3?¡ã2¡Á¡ã¡¤?¨º?
    0 ?T¦Ì?3?
    1 ?¨¦?¨¹??¦Ì?3?
    2 ?¨²??¨°?¨¬??¡¥¦Ì?3?
    */
    /*?¨¹¨¢?¡Á¡ä¨¬?¨¤¨¤D¨ª?¨¬2¨¦*/
    if (AT_CMD_OPT_READ_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_DEVICE_OTHER_ERROR;
    }

    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_CHARGE) )
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    if (TAF_SUCCESS == AT_FillAndSndAppReqMsg(gastAtClientTab[ucIndex].usClientId,
                                               gastAtClientTab[ucIndex].opId,
                                               DRV_AGENT_TBAT_QRY_REQ,
                                               VOS_NULL_PTR,
                                               0,
                                               I0_WUEPS_PID_DRV_AGENT))
    {
        gastAtClientTab[ucIndex].CmdCurrentOpt = AT_CMD_TBAT_QRY;             /*¨¦¨¨??¦Ì¡À?¡ã2¨´¡Á¡Â?¡ê¨º? */
        return AT_WAIT_ASYNC_RETURN;                                                              /* ¦Ì¨¨¡äy¨°¨¬2?¨º??t¡¤¦Ì?? */
    }
    else
    {
        return AT_ERROR;
    }
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetPstandbyPara
 1|?¨¹?¨¨¨º?  : ¨¦¨¨??¦Ì£¤¡ã???¨¨?¦Ì?¡äy?¨²¡Á¡ä¨¬??¡ê
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

  2.¨¨?    ?¨²   : 2012?¨º2??21¨¨?
    ¡Á¡Â    ??   : w00199382
    DT???¨²¨¨Y   : B060???????¨®¦Ì¡Á¨¨¨ª?¨¤1??¨®?¨²¦Ì¡Â¨®?
  3.¨¨?    ?¨²   : 2012?¨º03??03¨¨?
    ¡Á¡Â    ??   : s62952
    DT???¨²¨¨Y   : BalongV300R002 Build¨®??¡¥???? :¨¦?3y¨¬?D?o¨º
  4.¨¨?    ?¨²   : 2012?¨º04??13¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : V7¡ä¨²??¨ª?2?: ¨¦?3yWIFI_POWER_SHUTDOWN¡ê?oledPwrOffo¨ªDRV_PWRCTRL_USB_LOWPOWER_ENTER¦Ì?¦Ì¡Â¨®?¡ê?
                        ¨¬????aDRV_PWRCTRL_STANDBYSTATEACPU (BSP_PWRCTRL_StandbyStateAcpu)
  5.¨¨?    ?¨²   : 2014?¨º2??14¨¨?
    ¡Á¡Â    ??   : w00167002
    DT???¨²¨¨Y   : L-C?£¤2¨´¡Á¡Â????:?a1??¨²o¡¥¨ºy¦Ì¡Â??
*****************************************************************************/
VOS_UINT32 AT_SetPstandbyPara(VOS_UINT8 ucIndex)
{
    DRV_AGENT_PSTANDBY_REQ_STRU         stPstandbyInfo;


    /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, begin */
    TAF_MMA_PHONE_MODE_PARA_STRU        stPhoneModePara;
    /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, end */


    /* ^PSTANDBY¨¦¨¨???¨¹¨¢?¨®D?¨°??¨®D2??2?¨ºy: ??¨¨?¡äy?¨²¡Á¡ä¨¬?¦Ì?¨º¡À??3¡è?¨¨o¨ª¦Ì£¤¡ã???¨¨?¡äy?¨²¡Á¡ä¨¬?¦Ì??D??¨º¡À?? */
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if ((0 == gastAtParaList[0].usParaLen)
     || (0 == gastAtParaList[1].usParaLen)
     || (2 != gucAtParaIndex))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    At_FormatResultData(ucIndex, AT_OK); /*D¨¨¨°a?¨¨???¡äOK*/

    /*¡À¡ê?¡è¡¤¦Ì??¨ºy?Y¡¤¡é?¨ª¨ª¨º3¨¦*/
    VOS_TaskDelay(10);

    /*
    ¦Ì¡Â¨®?¦Ì¡Á¨¨¨ªo¨ªOM?¨®?¨²¨º1¦Ì£¤¡ã???¨¨?¡äy?¨²¡Á¡ä¨¬?:
    ACPU¨¦?¨ª¨º3¨¦¦Ì?2¨´¡Á¡Â¡êo
    1?¡é??¦Ì?WIFI
    2?¡éLED??¦Ì?
    3?¡éUSB PowerOff

    ¡¤¡é???¡é¦Ì?Co?¡ê???¨º?CCPU¨¦?¨ª¨º3¨¦¦Ì?2¨´¡Á¡Â¡êo
    1?¡é¨ª¡§D??¡ê?¨¦??¦Ì?
    2?¡é1??¡§¨º¡À?¡Â
    3?¡é1??D??
    4?¡é¦Ì¡Â¨®?¦Ì¡Á¨¨¨ª?¨®?¨²??¨¨?¨¦??¡¥
    */
    /* Modify by f62575 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */
    stPstandbyInfo.ulStandbyTime = gastAtParaList[0].ulParaValue;
    stPstandbyInfo.ulSwitchTime   = gastAtParaList[1].ulParaValue;

    DRV_PWRCTRL_STANDBYSTATEACPU(stPstandbyInfo.ulStandbyTime, stPstandbyInfo.ulSwitchTime);

    /*¡¤¡é?¨ª???¡é¦Ì?co?*/
    if (TAF_SUCCESS != AT_FillAndSndAppReqMsg(gastAtClientTab[ucIndex].usClientId,
                           gastAtClientTab[ucIndex].opId,
                           DRV_AGENT_PSTANDBY_SET_REQ,
                           &stPstandbyInfo,
                           sizeof(stPstandbyInfo),
                           I0_WUEPS_PID_DRV_AGENT))
    {
        AT_ERR_LOG("AT_SetPstandbyPara: AT_FillAndSndAppReqMsg fail.");
    }

    /* V7R22¨¦¨®?1??¨²??¨¨?¦Ì¨ª1|o?¨¢¡Â3¨¬¨¢¡Â3¨¬ */

    /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, begin */
    stPhoneModePara.PhMode = TAF_PH_MODE_MINI;

    if (VOS_TRUE == TAF_MMA_PhoneModeSetReq(WUEPS_PID_AT, gastAtClientTab[ucIndex].usClientId, 0, &stPhoneModePara))
    {
        /* Modified by zwx247453 for pc1¡è3¨¬¡Áa3650, 2015-08-24, begin */
        /* ¨¦¨¨??¦Ì¡À?¡ã2¨´¡Á¡Â¨¤¨¤D¨ª */
        gastAtClientTab[ucIndex].CmdCurrentOpt = (AT_CMD_CURRENT_OPT_ENUM)AT_CMD_PSTANDBY_SET;
        /* Modified by zwx247453 for pc1¡è3¨¬¡Áa3650, 2015-08-24, end */

        return AT_WAIT_ASYNC_RETURN;    /* ¡¤¦Ì???¨¹¨¢?¡ä|¨¤¨ª1¨°?e¡Á¡ä¨¬? */
    }
    /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, end */

    return AT_SUCCESS;
}

/* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ start in 2012-04-12 */
VOS_UINT32 AT_SetExbandInfoPara(VOS_UINT8 ucIndex)
{
    LTE_COMM_NON_STANDARD_BAND_COMM_STRU stLpsNonstandBand = {0};
    VOS_UINT32 ulRet  = AT_OK;
    VOS_UINT32 ulNvId = 0;

    /* 1?¡éAT?¨¹¨¢?¨¤¨¤D¨ª¨º?¡¤??y¨¨¡¤ */
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* 2?¡é2?¨ºy??¨ºy¨º?¡¤?¡¤?o?¨°a?¨® */
    if(1 != gucAtParaIndex)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    ulNvId = gastAtParaList[0].ulParaValue -LTE_COMM_NONSTANDARD_BAND_BEGIN  + EN_NV_ID_BANDNon1_BAND_INFO  ;
    if((ulNvId < EN_NV_ID_BANDNon1_BAND_INFO )||(ulNvId > EN_NV_ID_BANDNon16_BAND_INFO))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    ulRet = NVM_Read(ulNvId, (VOS_VOID*) &stLpsNonstandBand, sizeof(LTE_COMM_NON_STANDARD_BAND_COMM_STRU));
     if(  NV_OK != ulRet)
     {
        (VOS_VOID)vos_printf("read non stand band nv fail,ulNvId = %d,ulRet = %d!\n",ulNvId,ulRet);
        return AT_ERROR;
     }

    gstAtSendData.usBufLen = (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    "%s:BANDNO:%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                     stLpsNonstandBand.ucBandID);


    gstAtSendData.usBufLen += (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr + gstAtSendData.usBufLen,
                                                     "%s:DUPLEX:%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                     stLpsNonstandBand.enBandMode);

    gstAtSendData.usBufLen += (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (TAF_CHAR *)pgucAtSndCodeAddr,
                                                (TAF_CHAR *)pgucAtSndCodeAddr + gstAtSendData.usBufLen,
                                                   "%s:FREQ:%d,%d,%d,%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                    stLpsNonstandBand.stUlFreqInfo.usFLow,
                                                    stLpsNonstandBand.stUlFreqInfo.usFHigh,
                                                    stLpsNonstandBand.stDlFreqInfo.usFLow,
                                                    stLpsNonstandBand.stDlFreqInfo.usFHigh
                                                 );

    gstAtSendData.usBufLen += (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (TAF_CHAR *)pgucAtSndCodeAddr,
                                                (TAF_CHAR *)pgucAtSndCodeAddr + gstAtSendData.usBufLen,
                                                   "%s:CHANNUM:%d,%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                    stLpsNonstandBand.stUlFreqInfo.usRangOfNLow,
                                                    stLpsNonstandBand.stDlFreqInfo.usRangOfNLow);

     return AT_OK;
}

VOS_UINT32 AT_SetExbandTestInfoPara(VOS_UINT8 ucIndex)
{
    LTE_COMM_NON_STANDARD_BAND_COMM_STRU stLpsNonstandBand = {0};
    VOS_UINT32 ulRet  = AT_OK;
    VOS_UINT32 ulNvId = 0,ulArrayID=0 ,i=0;

    VOS_UINT32 BandWidthArray[BAND_WIDTH_NUMS]= {14,30,50,100,150,200};

    /* 1?¡éAT?¨¹¨¢?¨¤¨¤D¨ª¨º?¡¤??y¨¨¡¤ */
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* 2?¡é2?¨ºy??¨ºy¨º?¡¤?¡¤?o?¨°a?¨® */
    if(2 != gucAtParaIndex)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    ulNvId = gastAtParaList[0].ulParaValue -LTE_COMM_NONSTANDARD_BAND_BEGIN  + EN_NV_ID_BANDNon1_BAND_INFO  ;

    if((ulNvId  < EN_NV_ID_BANDNon1_BAND_INFO ) ||(ulNvId > EN_NV_ID_BANDNon16_BAND_INFO))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    ulRet = NVM_Read(ulNvId, (VOS_VOID*) &stLpsNonstandBand, sizeof(LTE_COMM_NON_STANDARD_BAND_COMM_STRU));

    if(  NV_OK != ulRet)
    {
        (VOS_VOID)vos_printf("read non stand band nv fail,ulRet = %d!\n",ulRet);
        return AT_ERROR;
    }

    ulArrayID = BandWidthArray[BAND_WIDTH_NUMS -1];

    for(i = 0 ; i < BAND_WIDTH_NUMS; i++)
    {
        if( BandWidthArray[i] == gastAtParaList[1].ulParaValue)
        {
            ulArrayID = i;
            break;
        }
    }

    gstAtSendData.usBufLen = 0 ;

    gstAtSendData.usBufLen += (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr,
                                                    (TAF_CHAR *)pgucAtSndCodeAddr + gstAtSendData.usBufLen,
                                                     "%s:FREQS:%d,%d,%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                     stLpsNonstandBand.stTestInfo[ulArrayID].usTestFreqs[0],
                                                     stLpsNonstandBand.stTestInfo[ulArrayID].usTestFreqs[1],
                                                     stLpsNonstandBand.stTestInfo[ulArrayID].usTestFreqs[2]);

    gstAtSendData.usBufLen += (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (TAF_CHAR *)pgucAtSndCodeAddr,
                                                (TAF_CHAR *)pgucAtSndCodeAddr + gstAtSendData.usBufLen,
                                                   "%s:MAXPOWTOLERANCE:%d,%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                    stLpsNonstandBand.stUePowerClassInfo.sPowerToleranceHigh,
                                                    stLpsNonstandBand.stUePowerClassInfo.sPowerToleranceLow
                                                 );

    gstAtSendData.usBufLen += (TAF_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (TAF_CHAR *)pgucAtSndCodeAddr,
                                                (TAF_CHAR *)pgucAtSndCodeAddr + gstAtSendData.usBufLen,
                                                   "%s:REFSENSPOW:%d\r\n",
                                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                   stLpsNonstandBand.stTestInfo[ulArrayID].sRxRefSensPower);
      return AT_OK;
}
/* DTS2012041801532 w00182550 NV1¨¦¨°??¡¥ end in 2012-04-12 */

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_WriteWiWep
 1|?¨¹?¨¨¨º?  : D¡äWIFI KEY¦Ì?NV??
 ¨º?¨¨?2?¨ºy  : VOS_UINT32                          ulIndex        WIFI KEY?¨²NV???D¦Ì??¡Â¨°y
             VOS_UINT32                          ulWiWepLen     WIFI KEY3¡è?¨¨
             VOS_UINT8                           aucWiWep[]     WIFI KEY?¨²¨¨Y
             AT_WIFI_SEC_STRU                   *pstWifiSecInfo WIFI KEY?¨´?¨²NV¦Ì?¨ºy?Y?¨¢11
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??10¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

  2.¨¨?    ?¨²   : 2012?¨º4??6¨¨?
    ¡Á¡Â    ??   : l60609
    DT???¨²¨¨Y   : DTS20120033007015:¦Ì¡Â??NV50012¦Ì??¨¢11??¡Á??¨²????
*****************************************************************************/
VOS_UINT32 AT_WriteWiWep(
    VOS_UINT32                          ulIndex,
    VOS_UINT8                           aucWiWep[],
    VOS_UINT16                          usWiWepLen,
    TAF_AT_MULTI_WIFI_SEC_STRU         *pstWifiSecInfo,
    VOS_UINT8                           ucGroup
)
{
    VOS_UINT32                          ulRet;
    VOS_UINT32                          ulLoop;
    VOS_UINT8                          *paucWifiWepKey;

    /* ¨°¨°?a??DT??en_NV_Item_WIFI_KEY?D¦Ì?WIFI KEY¡Á¨®??¡ê??¨´¨°?D¨¨¨°a?¨¨??¨¨?¨¨?2?NV?¦Ì¡ê?¨¨?o¨®?¨¹D?DT??2?¡¤? */
    ulRet = NV_ReadEx(MODEM_ID_0, en_NV_Item_MULTI_WIFI_KEY, pstWifiSecInfo, sizeof(TAF_AT_MULTI_WIFI_SEC_STRU));
    if (NV_OK != ulRet)
    {
        AT_WARN_LOG("AT_WriteWiWep: Fail to read en_NV_Item_WIFI_KEY.");
        return AT_ERROR;
    }

    /* ?¨´?Yindex??¨¨?NV?D¡À¡ê¡ä?¦Ì??¨¹?? */
    paucWifiWepKey = ((0 == ulIndex) ? pstWifiSecInfo->aucWifiWepKey1[ucGroup] :
                      ((1 == ulIndex) ? pstWifiSecInfo->aucWifiWepKey2[ucGroup] :
                      ((2 == ulIndex) ? pstWifiSecInfo->aucWifiWepKey3[ucGroup] : pstWifiSecInfo->aucWifiWepKey4[ucGroup])));

    /* ?D??D?¦Ì?WIFI KEY¨®?NV?D????¦Ì?¨º?¡¤?¨°??? */
    for (ulLoop = 0; ulLoop < AT_NV_WLKEY_LEN; ulLoop++)
    {
        if (paucWifiWepKey[ulLoop] != aucWiWep[ulLoop])
        {
            break;
        }
    }

    /* ?D??D?¦Ì?WIFI KEY¨®?NV?D????¦Ì?¨°????¨°?¡À?¨®¡¤¦Ì??2¨´¡Á¡Â¨ª¨º3¨¦*/
    if (AT_NV_WLKEY_LEN == ulLoop)
    {
        return AT_OK;
    }

    /* ?¨¹D?¨ºy?Y¦Ì?NV??en_NV_Item_WIFI_KEY */
    PS_MEM_SET(paucWifiWepKey, 0, AT_NV_WLKEY_LEN);

    PS_MEM_CPY(paucWifiWepKey, aucWiWep, usWiWepLen);

    ulRet = NV_WriteEx(MODEM_ID_0, en_NV_Item_MULTI_WIFI_KEY, pstWifiSecInfo, sizeof(TAF_AT_MULTI_WIFI_SEC_STRU));
    if (NV_OK != ulRet)
    {
         AT_WARN_LOG("AT_WriteWiWep: Fail to write NV en_NV_Item_WIFI_KEY.");
         return AT_ERROR;
    }

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetWiwepPara
 1|?¨¹?¨¨¨º?  : ¨¦¨¨?????¡§INDEX¦Ì?WiFi WEP¡ê¡§WIFI¦Ì?KEY¡ê??¨²¨¨Y
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

  2.¨¨?    ?¨²   : 2012?¨º4??6¨¨?
    ¡Á¡Â    ??   : l60609
    DT???¨²¨¨Y   : DTS20120033007015:¦Ì¡Â??NV50012¦Ì??¨¢11??¡Á??¨²????

  3.¨¨?    ?¨²   : 2012?¨º9??17¨¨?
    ¡Á¡Â    ??   : z60575
    DT???¨²¨¨Y   : MULTI_SSIDDT??
*****************************************************************************/
VOS_UINT32 AT_SetWiwepPara(VOS_UINT8 ucIndex)
{
    VOS_UINT32                          ulIndex;
    VOS_UINT8                           ucGroup;
    VOS_UINT32                          ulRet;
    TAF_AT_MULTI_WIFI_SEC_STRU         *pstWifiSecInfo;

    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI))
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    /* ¨º?¨¨?2?¨ºy?¨¬2¨¦: ¨®D?¨°??¨®D< index >o¨ª< content >¨¢???2?¨ºy */
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_ERROR;
    }

    if ((0 == gastAtParaList[0].usParaLen)
     || (0 == gastAtParaList[1].usParaLen)
     || (0 == gastAtParaList[2].usParaLen))
    {
        return AT_ERROR;
    }

    /* WIFI key 2¨´¡Á¡Â¨º¨¹DATALOCK¡À¡ê?¡è */
    if (VOS_TRUE == g_bAtDataLocked)
    {
        return AT_ERROR;
    }

    /* < index >¡À?D??¨²0-3¡¤??¡ì?¨²¡ê?< content >3¡è?¨¨D?¨®¨²NV_WLKEY_LEN */
    ulIndex = gastAtParaList[0].ulParaValue;
    if (ulIndex > AT_WIWEP_CARD_WIFI_KEY_TOTAL)
    {
        return AT_ERROR;
    }

    if (gastAtParaList[1].usParaLen > AT_NV_WLKEY_LEN)
    {
        return AT_ERROR;
    }

    ucGroup = (VOS_UINT8)gastAtParaList[2].ulParaValue;

    if (ucGroup >= AT_WIFI_MAX_SSID_NUM)
    {
        return AT_ERROR;
    }

    /* ¡Á¨¦¡Á¡ãWIFI KEY¦Ì?NV?¨¢112¡é?¨¹D?¨ºy?Y¦Ì?NV??en_NV_Item_WIFI_KEY */
    pstWifiSecInfo = (TAF_AT_MULTI_WIFI_SEC_STRU *)PS_MEM_ALLOC(WUEPS_PID_AT,
                                                  sizeof(TAF_AT_MULTI_WIFI_SEC_STRU));
    if (VOS_NULL_PTR == pstWifiSecInfo)
    {
        return AT_ERROR;
    }

    ulRet = AT_WriteWiWep(ulIndex,
                          gastAtParaList[1].aucPara,
                          gastAtParaList[1].usParaLen,
                          pstWifiSecInfo,
                          ucGroup);

    PS_MEM_FREE(WUEPS_PID_AT, pstWifiSecInfo);

    return ulRet;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryWiwepPara
 1|?¨¹?¨¨¨º?  : WIFI KEYD??¡é2¨¦?¡¥
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

  2.¨¨?    ?¨²   : 2012?¨º4??6¨¨?
    ¡Á¡Â    ??   : l60609
    DT???¨²¨¨Y   : DTS20120033007015:¦Ì¡Â??NV50012¦Ì??¨¢11??¡Á??¨²????
  3.¨¨?    ?¨²   : 2012?¨º9??17¨¨?
    ¡Á¡Â    ??   : z60575
    DT???¨²¨¨Y   : MULTI_SSIDDT??
*****************************************************************************/
VOS_UINT32 AT_QryWiwepPara(VOS_UINT8 ucIndex)
{
    VOS_UINT32                          ulRet;
    VOS_UINT32                          ulLoop;
    VOS_UINT16                          usLength;
    TAF_AT_MULTI_WIFI_SEC_STRU         *pstWifiSecInfo;
    VOS_UINT8                           aucWifiWepKey[AT_NV_WLKEY_LEN + 1];
    VOS_UINT8                           aucWepKeyLen1[AT_WIFI_MAX_SSID_NUM];
    VOS_UINT8                           aucWepKeyLen2[AT_WIFI_MAX_SSID_NUM];
    VOS_UINT8                           aucWepKeyLen3[AT_WIFI_MAX_SSID_NUM];
    VOS_UINT8                           aucWepKeyLen4[AT_WIFI_MAX_SSID_NUM];
    VOS_UINT8                           ucWepKeyNum;

    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI))
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    /* ?a?¨¢¨¨?WIFI KEY¨¦¨º???¨²¡ä?¡ê??¨¢NV??en_NV_Item_WIFI_KEY??¨¨?WIFI KEYD??¡é */
    pstWifiSecInfo = (TAF_AT_MULTI_WIFI_SEC_STRU *)PS_MEM_ALLOC(WUEPS_PID_AT,
                                                      sizeof(TAF_AT_MULTI_WIFI_SEC_STRU));
    if (VOS_NULL_PTR == pstWifiSecInfo)
    {
        return AT_ERROR;
    }

    ulRet = NV_ReadEx(MODEM_ID_0, en_NV_Item_MULTI_WIFI_KEY, pstWifiSecInfo, sizeof(TAF_AT_MULTI_WIFI_SEC_STRU));
    if (NV_OK != ulRet)
    {
        AT_WARN_LOG("AT_QryWiwepPara: Fail to read en_NV_Item_WIFI_KEY.");
        PS_MEM_FREE(WUEPS_PID_AT, pstWifiSecInfo);
        return AT_ERROR;
    }

    ucWepKeyNum = 0;
    PS_MEM_SET(aucWepKeyLen1, 0, sizeof(aucWepKeyLen1));
    PS_MEM_SET(aucWepKeyLen2, 0, sizeof(aucWepKeyLen2));
    PS_MEM_SET(aucWepKeyLen3, 0, sizeof(aucWepKeyLen3));
    PS_MEM_SET(aucWepKeyLen4, 0, sizeof(aucWepKeyLen4));

    for (ulLoop = 0; ulLoop < AT_WIFI_MAX_SSID_NUM; ulLoop++)
    {
        /* KEY1??¨®|¦Ì?NV2???¡À¨ª¨º?KEY1¨®DD¡ì */
        aucWepKeyLen1[ulLoop] = (VOS_UINT8)VOS_StrLen((VOS_CHAR*)pstWifiSecInfo->aucWifiWepKey1[ulLoop]);
        if (0 != aucWepKeyLen1[ulLoop])
        {
            ucWepKeyNum++;
        }

        aucWepKeyLen2[ulLoop] = (VOS_UINT8)VOS_StrLen((VOS_CHAR*)pstWifiSecInfo->aucWifiWepKey2[ulLoop]);
        if (0 != aucWepKeyLen2[ulLoop])
        {
            ucWepKeyNum++;
        }

        aucWepKeyLen3[ulLoop] = (VOS_UINT8)VOS_StrLen((VOS_CHAR*)pstWifiSecInfo->aucWifiWepKey3[ulLoop]);
        if (0 != aucWepKeyLen3[ulLoop])
        {
            ucWepKeyNum++;
        }

        aucWepKeyLen4[ulLoop] = (VOS_UINT8)VOS_StrLen((VOS_CHAR*)pstWifiSecInfo->aucWifiWepKey4[ulLoop]);
        if (0 != aucWepKeyLen4[ulLoop])
        {
            ucWepKeyNum++;
        }
    }

    /* ?¡ä?a??¨º¡À¡ê?D¨¨¨°a¡¤¦Ì??¨°??¡§??0¡Á¨¦ */
    if (VOS_TRUE == g_bAtDataLocked)
    {
        ucWepKeyNum = 0;
        PS_MEM_SET(aucWepKeyLen1, 0, sizeof(aucWepKeyLen1));
        PS_MEM_SET(aucWepKeyLen2, 0, sizeof(aucWepKeyLen2));
        PS_MEM_SET(aucWepKeyLen3, 0, sizeof(aucWepKeyLen3));
        PS_MEM_SET(aucWepKeyLen4, 0, sizeof(aucWepKeyLen4));
    }

    /*
    ?¨²¡Á?1¡è?????¨®¨°a?¨®¡ê?D¨¨¨°a¨º?3?1¡è???¡ì3?¦Ì?¨¨?2?¨ºy20??WiFi WEP¡ê¡§WIFI¦Ì?KEY¡ê?
    ¡ä¨°¨®???¡Á¨¦¦Ì£¤¡ã??¡ì3?¦Ì?WIFI KEYD??¡é
    ¨¬?3?16DD^WIWEP: <index>,¨®?1¡è??¨°a?¨®¦Ì?20??¦Ì?WiFi WEP¡ê¡§WIFI¦Ì?KEY¡ê?¨°???¡ê?
    */
    usLength = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                     (VOS_CHAR *)pgucAtSndCodeAddr,
                                     (VOS_CHAR *)pgucAtSndCodeAddr,
                                     "%s:%d%s",
                                     g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                     ucWepKeyNum,
                                     gaucAtCrLf);

    for (ulLoop = 0; ulLoop < AT_WIFI_MAX_SSID_NUM; ulLoop++)
    {
        if (0 != aucWepKeyLen1[ulLoop])
        {
            /* wifikey1 */
            PS_MEM_SET(aucWifiWepKey, 0, (VOS_SIZE_T)(AT_NV_WLKEY_LEN + 1));

            PS_MEM_CPY(aucWifiWepKey,
                       pstWifiSecInfo->aucWifiWepKey1[ulLoop],
                       AT_NV_WLKEY_LEN);

            usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                              (VOS_CHAR *)pgucAtSndCodeAddr,
                                              (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                              "%s:%d,%s,%d%s",
                                              g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                              0,
                                              aucWifiWepKey,
                                              ulLoop,
                                              gaucAtCrLf);
        }

        if (0 != aucWepKeyLen2[ulLoop])
        {
            /* wifikey1 */
            PS_MEM_SET(aucWifiWepKey, 0, (VOS_SIZE_T)(AT_NV_WLKEY_LEN + 1));

            PS_MEM_CPY(aucWifiWepKey,
                       pstWifiSecInfo->aucWifiWepKey2[ulLoop],
                       AT_NV_WLKEY_LEN);

            usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                              (VOS_CHAR *)pgucAtSndCodeAddr,
                                              (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                              "%s:%d,%s,%d%s",
                                              g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                              1,
                                              aucWifiWepKey,
                                              ulLoop,
                                              gaucAtCrLf);
        }

        if (0 != aucWepKeyLen3[ulLoop])
        {
            /* wifikey1 */
            PS_MEM_SET(aucWifiWepKey, 0, (VOS_SIZE_T)(AT_NV_WLKEY_LEN + 1));

            PS_MEM_CPY(aucWifiWepKey,
                       pstWifiSecInfo->aucWifiWepKey3[ulLoop],
                       AT_NV_WLKEY_LEN);

            usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                              (VOS_CHAR *)pgucAtSndCodeAddr,
                                              (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                              "%s:%d,%s,%d%s",
                                              g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                              2,
                                              aucWifiWepKey,
                                              ulLoop,
                                              gaucAtCrLf);
        }

        if (0 != aucWepKeyLen4[ulLoop])
        {
            /* wifikey1 */
            PS_MEM_SET(aucWifiWepKey, 0, (VOS_SIZE_T)(AT_NV_WLKEY_LEN + 1));

            PS_MEM_CPY(aucWifiWepKey,
                       pstWifiSecInfo->aucWifiWepKey4[ulLoop],
                       AT_NV_WLKEY_LEN);

            usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                              (VOS_CHAR *)pgucAtSndCodeAddr,
                                              (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                              "%s:%d,%s,%d%s",
                                              g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                              3,
                                              aucWifiWepKey,
                                              ulLoop,
                                              gaucAtCrLf);
        }
    }

    gstAtSendData.usBufLen = usLength - (VOS_UINT16)VOS_StrLen((VOS_CHAR *)gaucAtCrLf);

    PS_MEM_FREE(WUEPS_PID_AT, pstWifiSecInfo);

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_TestWiwepPara
 1|?¨¹?¨¨¨º?  : WIWEP¦Ì?2a¨º??¨¹¨¢?¡ê?¨º?3?1¡è???¡ì3?¦Ì?WIFI KEY¡Á¨¹¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_TestWiwepPara(VOS_UINT8 ucIndex)
{
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI) )
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                   (VOS_CHAR *)pgucAtSndCodeAddr,
                                                   (VOS_CHAR *)pgucAtSndCodeAddr,
                                                   "%s:%d",
                                                   g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                   AT_WIWEP_TOOLS_WIFI_KEY_TOTAL);

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_TestWifiPaRangePara
 1|?¨¹?¨¨¨º?  : AT^WIPARANGE2a¨º?o¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º02??02¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_TestWifiPaRangePara (VOS_UINT8 ucIndex)
{
    AT_WIFI_MODE_ENUM_UINT8             ucWifiMode;

    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
    if (BSP_MODULE_UNSUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI) )
    {
        return AT_ERROR;
    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    /* 3?¨º??¡¥ */
    ucWifiMode                          = (VOS_UINT8)WIFI_GET_PA_MODE();

    /* 2¨¦?¡¥¦Ì£¤¡ã??¡ì3?¦Ì??¡ê¨º?¡êo¨¨?1????¡ì3?PA?¡ê¨º?¡ê???¨®DNO PA?¡ê¨º?¡ê??¨°??¡¤¦Ì??h?¡ä?¨¦¡ê?¨¨?1?¨¢????¡ê¨º????¡ì3?¡ê??¨°¡¤¦Ì??h,l?¡ê*/
    if (AT_WIFI_MODE_ONLY_PA == ucWifiMode)
    {
        gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (VOS_CHAR *)pgucAtSndCodeAddr,
                                                (VOS_CHAR *)pgucAtSndCodeAddr,
                                                "%s:%s",
                                                g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                "h");
    }
    else if (AT_WIFI_MODE_ONLY_NOPA == ucWifiMode)
    {
        gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (VOS_CHAR *)pgucAtSndCodeAddr,
                                                (VOS_CHAR *)pgucAtSndCodeAddr,
                                                "%s:%s",
                                                g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                "l");
    }
    else if (AT_WIFI_MODE_PA_NOPA == ucWifiMode)
    {
        gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                (VOS_CHAR *)pgucAtSndCodeAddr,
                                                (VOS_CHAR *)pgucAtSndCodeAddr,
                                                "%s:%s",
                                                g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                "h,l");
    }
    else
    {
        return AT_ERROR;
    }

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_GetTseLrfLoadDspInfo
 1|?¨¹?¨¨¨º?  : ^TSELRF?¨¹¨¢?¨º?¡¤?¡ä£¤¡¤¡éLOAD DSP
 ¨º?¨¨?2?¨ºy  : AT_TSELRF_PATH_ENUM_UINT32          enPath     ¨¦??¦Ì¨ª¡§?¡¤¡À¨¤o?
             VOS_BOOL                           *pbLoadDsp  ¨º?¡¤?¡ä£¤¡¤¡éLOAD DSP
                     VOS_FALSE                              2?¡ä£¤¡¤¡éLOAD DSP2¨´¡Á¡Â
                     VOS_TRUE                               ¡ä£¤¡¤¡éLOAD DSP2¨´¡Á¡Â
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_VOID
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??10¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º01??16¨¨?
    ¡Á¡Â    ??   : m00217266
    DT???¨²¨¨Y   : DSDA Co??????¨®?¨²DT??(load mode DT??)

*****************************************************************************/
VOS_VOID AT_GetTseLrfLoadDspInfo(
    AT_TSELRF_PATH_ENUM_UINT32          enPath,
    VOS_BOOL                           *pbLoadDsp,
    DRV_AGENT_TSELRF_SET_REQ_STRU      *pstTseLrf
)
{
    /* ^TSELRF?¨¹¨¢?¨¦¨¨??¦Ì?¨¦??¦Ì¨ª¡§?¡¤¡À¨¤o??aGSM?¨°¦Ì¡À?¡ã¨°??-LOAD¨¢???¨ª¡§?¡¤¡ê??TD¨¨LOAD */
    if (AT_TSELRF_PATH_GSM == enPath)
    {
        if ((AT_RAT_MODE_GSM == g_stAtDevCmdCtrl.ucDeviceRatMode)
         && (VOS_TRUE == g_stAtDevCmdCtrl.bDspLoadFlag))
        {
            *pbLoadDsp = VOS_FALSE;
        }
        else
        {
            pstTseLrf->ucLoadDspMode     = VOS_RATMODE_GSM;
            pstTseLrf->ucDeviceRatMode   = AT_RAT_MODE_GSM;
            *pbLoadDsp                   = VOS_TRUE;
        }
        return;
    }

    /* ^TSELRF?¨¹¨¢?¨¦¨¨??¦Ì?¨¦??¦Ì¨ª¡§?¡¤¡À¨¤o??aWCDMA?¡Â?¡¥?¨°¦Ì¡À?¡ã¨°??-LOAD¨¢???¨ª¡§?¡¤¡ê??TD¨¨LOAD */
    if (AT_TSELRF_PATH_WCDMA_PRI == enPath)
    {
        if (((AT_RAT_MODE_WCDMA == g_stAtDevCmdCtrl.ucDeviceRatMode)
          || (AT_RAT_MODE_AWS == g_stAtDevCmdCtrl.ucDeviceRatMode))
         && (VOS_TRUE == g_stAtDevCmdCtrl.bDspLoadFlag))
        {
            *pbLoadDsp = VOS_FALSE;
        }
        else
        {
            pstTseLrf->ucLoadDspMode     = VOS_RATMODE_WCDMA;
            pstTseLrf->ucDeviceRatMode   = AT_RAT_MODE_WCDMA;
            *pbLoadDsp                   = VOS_TRUE;
        }
        return;
    }

    *pbLoadDsp = VOS_FALSE;

    AT_WARN_LOG("AT_GetTseLrfLoadDspInfo: enPath only support GSM or WCDMA primary.");

    return;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetTseLrfPara
 1|?¨¹?¨¨¨º?  : ^TSELRF¦Ì?¨¦¨¨??2¨´¡Á¡Â
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex  ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32 ¡¤¦Ì???¡äDD?¨¢1?3¨¦1|?¨°?¨¤¨®|¡ä¨ª?¨®??
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??10¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º4??21¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : V7¡ä¨²??¨ª?2?: ???¨®PATH2?¨ºy¡À¡ê?¡è
  3.¨¨?    ?¨²   : 2012?¨º05??04¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : DTS2012040600347¡ê??¡ì3??¨¨??¡¤??¡¥o¨®¡ä¨°?a?¨®¨º??¨²¦Ì?D?¡Á¡ã¡À?¨¢¡Â3¨¬
  4.¨¨?    ?¨²   : 2012?¨º05??05¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : DTS2012050502003¡ê??a??V7¡ã?¡À?AT^TSELRF=1?¨¹¨¢??T?¨¬¨®|?¨º¨¬a

*****************************************************************************/
VOS_UINT32 AT_SetTseLrfPara(VOS_UINT8 ucIndex)
{
    DRV_AGENT_TSELRF_SET_REQ_STRU       stTseLrf;
    VOS_BOOL                            bLoadDsp;

    if (AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_ERROR;
    }

    /*DTS2012041102190 : h00135900 start in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/
    if ((AT_TSELRF_PATH_WCDMA_PRI!=gastAtParaList[0].ulParaValue)
     && (AT_TSELRF_PATH_WCDMA_DIV!=gastAtParaList[0].ulParaValue)
     && (AT_TSELRF_PATH_GSM !=gastAtParaList[0].ulParaValue))
    {
        return atSetTselrfPara(ucIndex);
    }
    /*DTS2012041102190 : h00135900 end in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/

    if(AT_TSELRF_PATH_TD == gastAtParaList[0].ulParaValue)
    {
        return atSetTselrfPara(ucIndex);
    }

    /* 2?¨ºy2?¡¤?o?¨°a?¨® */
    if ((1 != gucAtParaIndex)
     || (0 == gastAtParaList[0].usParaLen))
    {
        return AT_ERROR;
    }

    if (AT_TSELRF_PATH_WIFI == gastAtParaList[0].ulParaValue)
    {
        /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */
        if ( BSP_MODULE_SUPPORT == mdrv_misc_support_check(BSP_MODULE_TYPE_WIFI) )
        {
            /*WIFI?¡äEnable?¡À?¨®¡¤¦Ì??¨º¡ì¡ã¨¹*/
            if(VOS_FALSE == (VOS_UINT32)WIFI_GET_STATUS())
            {
                return AT_ERROR;
            }

            g_stAtDevCmdCtrl.ucDeviceRatMode = AT_RAT_MODE_WIFI;

            return AT_OK;
        }
        else
        {
            return AT_ERROR;
        }
        /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, end */
    }

    if (AT_TMODE_FTM != g_stAtDevCmdCtrl.ucCurrentTMode)
    {
        return AT_ERROR;
    }

    /* ¡ä¨°?a¡¤??¡¥¡À?D??¨²FRXON??o¨®¡ê?2???RXDIV¨º¦Ì?? */
    if (AT_TSELRF_PATH_WCDMA_DIV == gastAtParaList[0].ulParaValue)
    {
        if (DRV_AGENT_DSP_RF_SWITCH_ON != g_stAtDevCmdCtrl.ucRxOnOff)
        {
            g_stAtDevCmdCtrl.ucPriOrDiv = AT_RX_DIV_ON;
            return AT_OK;
        }
        if (AT_FAILURE == At_SendRfCfgAntSelToHPA(AT_RX_DIV_ON, ucIndex))
        {
            return AT_ERROR;
        }

        gastAtClientTab[ucIndex].CmdCurrentOpt = AT_CMD_TSELRF_SET;
        g_stAtDevCmdCtrl.ucIndex               = ucIndex;

        /* ¡¤¦Ì???¨¹¨¢?¡ä|¨¤¨ª1¨°?e¡Á¡ä¨¬? */
        return AT_WAIT_ASYNC_RETURN;
    }

    /* Modify by f62575 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */
    if ((AT_TSELRF_PATH_GSM != gastAtParaList[0].ulParaValue)
     && (AT_TSELRF_PATH_WCDMA_PRI != gastAtParaList[0].ulParaValue))
    {
        return AT_ERROR;
    }
    /* Modify by f62575 for V7¡ä¨²??¨ª?2?, 2012-04-07, End   */

    /* ¡ä?¡ä|?D??¨º?¡¤?D¨¨¨°a??D??¨®??DSP: D¨¨¨°a?¨°¡¤¡é???¨®¦Ì?Co??¨®??DSP¡ê?¡¤??¨°¡ê??¡À?¨®¡¤¦Ì??OK */
    AT_GetTseLrfLoadDspInfo(gastAtParaList[0].ulParaValue, &bLoadDsp, &stTseLrf);
    if (VOS_TRUE == bLoadDsp)
    {
        if (TAF_SUCCESS == AT_FillAndSndAppReqMsg(gastAtClientTab[ucIndex].usClientId,
                                                   gastAtClientTab[ucIndex].opId,
                                                   DRV_AGENT_TSELRF_SET_REQ,
                                                   &stTseLrf,
                                                   sizeof(stTseLrf),
                                                   I0_WUEPS_PID_DRV_AGENT))
        {
            gastAtClientTab[ucIndex].CmdCurrentOpt = AT_CMD_TSELRF_SET;             /*¨¦¨¨??¦Ì¡À?¡ã2¨´¡Á¡Â?¡ê¨º? */
            return AT_WAIT_ASYNC_RETURN;                                           /* ¦Ì¨¨¡äy¨°¨¬2?¨º??t¡¤¦Ì?? */
        }
        else
        {
            return AT_ERROR;
        }
    }

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryTseLrfPara
 1|?¨¹?¨¨¨º?  : 2¨¦?¡¥?¨¹¨¢?¨®?¨¤¡ä¡¤¦Ì??¦Ì£¤¡ã??¡ì3?¦Ì??¨´¨®D?¨¦??¡ê??????¨¦??¡¤?DD??¨º?¡ê?????<path>
             ¨¤¨¤D¨ª????¨º?¨°?DD¡ê?
             ?¨´¨¤y¨¤¡ä?¦Ì¡ê?¨¨??¡ì3?2¡Á¨¦WIFI¨¬¨¬??¡ê??¨¦??¨º??a?¡À^TSELRF: 7,0,1?¡À
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32 ¡¤¦Ì???¡äDD?¨¢1?3¨¦1|?¨°?¨¤¨®|¡ä¨ª?¨®??
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??10¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_QryTseLrfPara(VOS_UINT8 ucIndex)
{

    /*DTS2012041102190 : h00135900 start in 2011-04-11 AT¡ä¨²??¨¨¨²o?*/
    return atQryTselrfPara(ucIndex);

}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetCmdlenPara
 1|?¨¹?¨¨¨º?  : ???a¦Ì£¤¡ã?PC¨°?¡ä??¨²¨ª?¡¤¡é?¨ª¦Ì?¡Á?¡¤???¨ºyo¨ªPC?¨²¨ª?¦Ì£¤¡ã?¨°?¡ä?¡¤¡é?¨ª¦Ì?¡Á?¡¤???¨ºy
             ???¨¹¨¢?¨®?¨®¨²?¡ì3?SIMLOCK¨ºy?Y¦Ì?¡¤???¡¤¡é?¨ª¡ê?BALONG?T¡ä?D¨¨?¨®¡ê???¡¤¦Ì??OK¡À¡ê?¡è1¡è
             ??1¨¦¨°??¡¥¨¢¡Â3¨¬?y3¡ê?¡äDD
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_SetCmdlenPara(VOS_UINT8 ucIndex)
{
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if ((0 == gastAtParaList[0].usParaLen)
     || (0 == gastAtParaList[1].usParaLen)
     || (2 != gucAtParaIndex))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if (gastAtParaList[0].ulParaValue > (AT_COM_BUFF_LEN - sizeof("AT")))
    {
        return AT_ERROR;
    }

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryCmdlenPara
 1|?¨¹?¨¨¨º?  : 2¨¦?¡¥¦Ì£¤¡ã?¡Á?¡ä¨®?¨¦¨°??¡À?¨®?¨®¨º?AT?¨¹¨¢?¡Á?¡¤???¨ºy¡ê?¨°??¡ã¦Ì£¤¡ã?¨ª¡§1yAT¨°?¡ä?¡Á?¡ä¨®
             ?¨¦¨°??¨¬¨®|¦Ì?¡Á?¡¤???¨ºy¡ê???¡Á?¡¤???¨ºy?¨´2?¡ã¨¹o?AT?a¨¢???¡Á?¡¤??¡ê
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??2¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_QryCmdlenPara(VOS_UINT8 ucIndex)
{
    /*
      ¨º?3?¦Ì£¤¡ã?¡Á?¡ä¨®?¨¦¨°??¡À?¨®?¨®¨º?AT?¨¹¨¢?¡Á?¡¤???¨ºy(AT_CMD_MAX_LEN - sizeof("AT"))¡ê?
      ??¡Á?¡¤???¨ºy?¨´2?¡ã¨¹o?AT?a¨¢???¡Á?¡¤?¡ê?¨°??¡ã¦Ì£¤¡ã?¨ª¡§1yAT¨°?¡ä?¡Á?¡ä¨®?¨¦¨°??¨¬¨®|¦Ì?¡Á?¡¤???¨ºy¡ê?
      BALONG2¨²?¡¤?¨¬¨®|¡Á?¡¤?¡ä?3¡è?¨¨?¨¦¨°?¡¤?
      ?¨¤¡ä?¨¦?¡À¡§¡ê???¨®D¡Á?¡ä¨®?¦Ì????¡ê?1¡è???????¦Ì?T¡ä|¨¤¨ª¡ê?¡ä?¡ä|¨º?3?¨°?¡ä?¨¦?¡À¡§¦Ì?¡Á?¡ä¨®?¦ÌAT_CMD_MAX_LEN?¡ê
    */
    gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (VOS_CHAR *)pgucAtSndCodeAddr,
                                                    (VOS_CHAR *)pgucAtSndCodeAddr,
                                                    "%s:%d,%d",
                                                    g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                    (AT_COM_BUFF_LEN - VOS_StrLen("AT")),
                                                    AT_CMD_MAX_LEN);

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_UpdateMacPara
 1|?¨¹?¨¨¨º?  : ?¨¹D?MAC¦Ì??¡¤¦Ì?NV
             ¨º?¡¤??¡ì3?2??MAC¡äy¨¨¡¤¨¨?¡ê?
 ¨º?¨¨?2?¨ºy  : VOS_UINT8                           aucMac[]   MAC¦Ì??¡¤¡Á?¡¤?¡ä?¨º¡Á¦Ì??¡¤
             VOS_UINT16                          usMacLength    MAC¦Ì??¡¤¡Á?¡¤?¡ä?3¡è?¨¨
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
             2¨´¡Á¡Â3¨¦1|¡ê?¡¤¦Ì??AT_OK
             ??¨¤¨ªo?3¡è?¨¨2?o?¡¤¡§¡¤¦Ì??AT_PHYNUM_LENGTH_ERR
             MT?¨²2?¡ä¨ª?¨®¡ê?¡¤¦Ì??AT_ERROR
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_UpdateMacPara(
    VOS_UINT8                           aucMac[],
    VOS_UINT16                          usMacLength
)
{
    VOS_UINT32                          ulRet;
    VOS_UINT32                          ulLoop;
    VOS_UINT32                          ulWifiGlobalMacOffset;
    VOS_UINT32                          ulPhyNumMacOffset;
    VOS_UINT8                           aucWifiGlobalMac[AT_MAC_ADDR_LEN];

    /* MAC¦Ì??¡¤3¡è?¨¨?¨¬2¨¦: ¡À?D?12?? */
    if (AT_PHYNUM_MAC_LEN != usMacLength)
    {
        return AT_PHYNUM_LENGTH_ERR;
    }

    /* MAC¦Ì??¡¤??¨º??£¤??: 7AFEE22111E4=>7A:FE:E2:21:11:E4*/
    ulWifiGlobalMacOffset = 0;
    ulPhyNumMacOffset     = 0;
    for (ulLoop = 0; ulLoop < (AT_PHYNUM_MAC_COLON_NUM + 1); ulLoop++)
    {
        PS_MEM_CPY(&aucWifiGlobalMac[ulWifiGlobalMacOffset],
                   &aucMac[ulPhyNumMacOffset],
                   AT_WIFIGLOBAL_MAC_LEN_BETWEEN_COLONS);
        ulWifiGlobalMacOffset += AT_WIFIGLOBAL_MAC_LEN_BETWEEN_COLONS;
        ulPhyNumMacOffset     += AT_WIFIGLOBAL_MAC_LEN_BETWEEN_COLONS;
        aucWifiGlobalMac[ulWifiGlobalMacOffset] = ':';
        ulWifiGlobalMacOffset++;
    }

    aucWifiGlobalMac[AT_PHYNUM_MAC_LEN + AT_PHYNUM_MAC_COLON_NUM] = '\0';

    /* ?¨¹D?MAC¦Ì??¡¤¦Ì?NV */
    ulRet = NV_WriteEx(MODEM_ID_0, en_NV_Item_WIFI_MAC_ADDR, aucWifiGlobalMac, AT_MAC_ADDR_LEN);
    if (NV_OK != ulRet)
    {
         AT_WARN_LOG("AT_UpdateMacPara: Fail to write NV.");
         return AT_ERROR;
    }

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetTmodeAutoPowerOff
 1|?¨¹?¨¨¨º?  : ¡Á??¡¥1??¨²¦Ì?¡Á¡ã¡À??¨¹¨¢?¡ê???E52¨²?¡¤D?¨¬??¡ì3?¡ê?????2¨²?¡¤D?¨¬?¡¤¦Ì??ERROR
             2¨²??¨°a?¨®?¨¨¨ª¡§?a¨®??¡ìAT?¨¹¨¢?¨°??¡äDD¡ê??¨²¡Á?2¨²??¦Ì?¨º¡ÀD¡ìD¨¨?¨®
             ¨®??¡ì¨ª¡§1y?¨¬2a???¨²¨º?¡¤???¨º¡ì¨¤¡ä¨¨¡¤¨¨?¨¨???¨º?¡¤??y¨¨¡¤?¡äDD
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex      ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º12??13¨¨?
    ¡Á¡Â    ??   : L00171473
    DT???¨²¨¨Y   : DTS2012121802573, TQE??¨¤¨ª
  3.¨¨?    ?¨²   : 2014?¨º2??14¨¨?
    ¡Á¡Â    ??   : w00167002
    DT???¨²¨¨Y   : L-C?£¤2¨´¡Á¡Â????:?a1??¨²o¡¥¨ºy¦Ì¡Â??
*****************************************************************************/
VOS_UINT32 AT_SetTmodeAutoPowerOff(VOS_UINT8 ucIndex)
{
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, begin */

    /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, begin */
    TAF_MMA_PHONE_MODE_PARA_STRU        stPhModeSet;
    /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, end */

    VOS_UINT8                             *pucSystemAppConfig;


    PS_MEM_SET(&stPhModeSet, 0x00, sizeof(TAF_MMA_PHONE_MODE_PARA_STRU));

    pucSystemAppConfig                    = AT_GetSystemAppConfigAddr();

    if ( SYSTEM_APP_WEBUI == *pucSystemAppConfig)
    {
        /* ¡¤¡é???¡é??Co?¨ª¡§?a1??¨²2¡é??¦Ì? */
        /* ?¨¨¨ª¡§?a¨®??¡ìAT?¨¹¨¢?¨°??¡äDD¡ê?¨®??¡ì¨ª¡§1y?¨¬2a???¨²¨º?¡¤???¨º¡ì¨¤¡ä¨¨¡¤¨¨?¨¨???¨º?¡¤??y¨¨¡¤?¡äDD
           ¡ä??¨¹¨¢??¡äDD¨ª¨º3¨¦o¨®¨°???¦Ì?¡ê??TD¨¨¦Ì¨¨¡äy¨°¨¬2?¡¤¦Ì??
        */

        /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, begin */
        stPhModeSet.PhMode  = TAF_PH_MODE_POWEROFF;

        if (VOS_TRUE == TAF_MMA_PhoneModeSetReq(WUEPS_PID_AT, gastAtClientTab[ucIndex].usClientId, 0, &stPhModeSet))
        {
            return AT_OK;
        }
        /* Modified by w00167002 for L-C?£¤2¨´¡Á¡Â????, 2014-2-14, end */
        else
        {
            return AT_ERROR;
        }

    }
    /* Modified by s62952 for BalongV300R002 Build¨®??¡¥???? 2012-02-28, end */

    return AT_ERROR;

}

/* Add by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, Begin   */

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SDParamErrCode
 1|?¨¹?¨¨¨º?  : SD?¨¹¨¢?2?¨ºy¡ä¨ª?¨®¡¤¦Ì??¡ä¨ª?¨®??¦Ì?¡ä|¨¤¨ª
 ¨º?¨¨?2?¨ºy  : ?T
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??19¨¨?
    ¡Á¡Â    ??   : c64416
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_SDParamErrCode(VOS_VOID)
{
    if(0 == g_stATParseCmd.ucParaCheckIndex)
    {
        return AT_SD_CARD_OPRT_NOT_ALLOWED;
    }
    else if(1 == g_stATParseCmd.ucParaCheckIndex)
    {
        return AT_SD_CARD_ADDR_ERR;
    }
    else
    {
        return AT_SD_CARD_OTHER_ERR;
    }
}

/* Add by w00199382 for V7¡ä¨²??¨ª?2?, 2012-04-07, End   */

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_GetSpecificPort
 1|?¨¹?¨¨¨º?  : ??¨¨????¡§¨¤¨¤D¨ª¦Ì????¨²
 ¨º?¨¨?2?¨ºy  : VOS_UINT8                           ucPortType ???¨²¨¤¨¤D¨ª
 ¨º?3?2?¨ºy  : VOS_UINT32                         *pulPortPos ???¨²?¨²NV???D¦Ì???¨°?
             VOS_UINT32                         *pulPortNum NV???D¦Ì????¨²¡Á¨¹¨ºy
 ¡¤¦Ì ?? ?¦Ì  : ?T
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_VOID AT_GetSpecificPort(
    VOS_UINT8                           ucPortType,
    VOS_UINT8                           aucRewindPortStyle[],
    VOS_UINT32                         *pulPortPos,
    VOS_UINT32                         *pulPortNum
)
{
    VOS_UINT32                          ulLoop;

    *pulPortPos = AT_DEV_NONE;
    for (ulLoop = 0; ulLoop < AT_SETPORT_PARA_MAX_LEN; ulLoop++)
    {
        if (0 == aucRewindPortStyle[ulLoop])
        {
            break;
        }

        /* ???¨²?¦Ì?aucPortType¡ê?¡À¨ª¨º??¨°¦Ì????¡§???¨²¡ê?????ulLoop?a???¨²?¨²NV???D¦Ì???¨°? */
        if (ucPortType == aucRewindPortStyle[ulLoop])
        {
            *pulPortPos = ulLoop;
        }
    }

    /* ???¨²?¦Ì?a0?¨°¦Ì?¡ä??-?¡¤¨¦??T¡ê?ulLoop?¡ä?a¦Ì£¤¡ã?¦Ì????¨²¡Á¨¹¨ºy */
    *pulPortNum = ulLoop;

    return;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_ExistSpecificPort
 1|?¨¹?¨¨¨º?  : ¨º?¡¤?¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²
 ¨º?¨¨?2?¨ºy  : VOS_UINT8              ucPortType ???¨²¨¤¨¤D¨ª
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             VOS_TRUE    ¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²
                                    VOS_FALSE 2?¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º8??10¨¨?
    ¡Á¡Â    ??   : L00171473
    DT???¨²¨¨Y   : DTS2012082204471, TQE??¨¤¨ª
*****************************************************************************/
VOS_UINT32 AT_ExistSpecificPort(VOS_UINT8 ucPortType)
{
    AT_DYNAMIC_PID_TYPE_STRU            stDynamicPidType;
    VOS_UINT32                          ulPortPos;
    VOS_UINT32                          ulPortNum;


    PS_MEM_SET(&stDynamicPidType, 0x00, sizeof(stDynamicPidType));

    ulPortPos = 0;
    ulPortNum = 0;


    /* ?¨¢NV??en_NV_Item_Huawei_Dynamic_PID_Type??¨¨?¦Ì¡À?¡ã¦Ì????¨²¡Á¡ä¨¬? */
    if (NV_OK != NV_ReadEx(MODEM_ID_0, en_NV_Item_Huawei_Dynamic_PID_Type,
                        &stDynamicPidType,
                        sizeof(AT_DYNAMIC_PID_TYPE_STRU)))
    {
        AT_WARN_LOG("AT_ExistSpecificPort: Read NV fail!");
        return VOS_FALSE;
    }

    /* ?D??DIAG???¨²¨º?¡¤?¨°??-¡ä¨°?a: ¨°??-¡ä¨°?a?¨°?¡À?¨®¡¤¦Ì??AT_OK */
    if (VOS_TRUE == stDynamicPidType.ulNvStatus)
    {
        /* 2¨¦?¡¥NV??en_NV_Item_Huawei_Dynamic_PID_Type?D¨º?¡¤?¨°??-¡ä??¨²DIAG?¨² */
        AT_GetSpecificPort(ucPortType,
                           stDynamicPidType.aucRewindPortStyle,
                           &ulPortPos,
                           &ulPortNum);

        if (AT_DEV_NONE != ulPortPos)
        {
            return VOS_TRUE;
        }

    }

    return VOS_FALSE;
}


/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_OpenDiagPort
 1|?¨¹?¨¨¨º?  : ¡ä¨°?aDIAG???¨²
 ¨º?¨¨?2?¨ºy  : ?T
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º8??10¨¨?
    ¡Á¡Â    ??   : L00171473
    DT???¨²¨¨Y   : DTS2012082204471, TQE??¨¤¨ª
*****************************************************************************/
VOS_UINT32 AT_OpenDiagPort(VOS_VOID)
{
    AT_DYNAMIC_PID_TYPE_STRU            stDynamicPidType;
    VOS_UINT32                          ulPortPos;
    VOS_UINT32                          ulPortNum;


    PS_MEM_SET(&stDynamicPidType, 0x00, sizeof(stDynamicPidType));

    ulPortPos = 0;
    ulPortNum = 0;


    /* ?¨¢NV??en_NV_Item_Huawei_Dynamic_PID_Type??¨¨?¦Ì¡À?¡ã¦Ì????¨²¡Á¡ä¨¬? */
    if (NV_OK != NV_ReadEx(MODEM_ID_0, en_NV_Item_Huawei_Dynamic_PID_Type,
                        &stDynamicPidType,
                        sizeof(AT_DYNAMIC_PID_TYPE_STRU)))
    {
        AT_WARN_LOG("AT_OpenDiagPort: Read NV fail!");
        return AT_ERROR;
    }

    /* ?D??DIAG???¨²¨º?¡¤?¨°??-¡ä¨°?a: ¨°??-¡ä¨°?a?¨°?¡À?¨®¡¤¦Ì??AT_OK */
    if (VOS_TRUE == stDynamicPidType.ulNvStatus)
    {
        /* 2¨¦?¡¥NV??en_NV_Item_Huawei_Dynamic_PID_Type?D¨º?¡¤?¨°??-¡ä??¨²DIAG?¨² */
        AT_GetSpecificPort(AT_DEV_DIAG,
                           stDynamicPidType.aucRewindPortStyle,
                           &ulPortPos,
                           &ulPortNum);

        if (AT_DEV_NONE != ulPortPos)
        {
            return AT_OK;
        }

    }
    else
    {
        AT_WARN_LOG("AT_OpenDiagPort: en_NV_Item_Huawei_Dynamic_PID_Type is inactive!");
        return AT_OK;
    }

    /* DIAG???¨²2¨´¡Á¡Â¨¨¡§?T?¡ä??¨¨?: ?¡À?¨®¡¤¦Ì??AT_OK */
    if (AT_E5_RIGHT_FLAG_NO == g_enATE5RightFlag)
    {
        return AT_OK;
    }

    /* ¡Á¡¤?¨®DIAG???¨²¦Ì??D??o¨®???¨²?¡¥ */
    if (AT_SETPORT_PARA_MAX_LEN == ulPortNum)
    {
        return AT_OK;
    }

    stDynamicPidType.aucRewindPortStyle[ulPortNum] = AT_DEV_DIAG;

    /* ?¨¹D????¨²?¡¥o?¨ºy?Y¦Ì?NV??en_NV_Item_Huawei_Dynamic_PID_Type */
    if (NV_OK != NV_WriteEx(MODEM_ID_0, en_NV_Item_Huawei_Dynamic_PID_Type,
                        &stDynamicPidType,
                        sizeof(AT_DYNAMIC_PID_TYPE_STRU)))
    {
        AT_ERR_LOG("AT_OpenDiagPort: Write NV fail");
        return AT_ERROR;
    }
    else
    {
        return AT_OK;
    }
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_CloseDiagPort
 1|?¨¹?¨¨¨º?  : 1?¡À?DIAG???¨²
 ¨º?¨¨?2?¨ºy  : ?T
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             ATC¡¤¦Ì????
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º8??10¨¨?
    ¡Á¡Â    ??   : L00171473
    DT???¨²¨¨Y   : DTS2012082204471, TQE??¨¤¨ª
*****************************************************************************/
VOS_UINT32 AT_CloseDiagPort(VOS_VOID)
{
    AT_DYNAMIC_PID_TYPE_STRU            stDynamicPidType;
    VOS_UINT32                          ulPortPos;
    VOS_UINT32                          ulPortNum;
    VOS_UINT32                          ulLoop;


    PS_MEM_SET(&stDynamicPidType, 0x00, sizeof(stDynamicPidType));

    ulPortPos = 0;
    ulPortNum = 0;


    /* ?¨¢NV??en_NV_Item_Huawei_Dynamic_PID_Type??¨¨?¦Ì¡À?¡ã¦Ì????¨²¡Á¡ä¨¬? */
    if (NV_OK != NV_ReadEx(MODEM_ID_0, en_NV_Item_Huawei_Dynamic_PID_Type,
                          &stDynamicPidType,
                          sizeof(AT_DYNAMIC_PID_TYPE_STRU)))
    {
        AT_ERR_LOG("AT_CloseDiagPort: Read NV fail!");
        return AT_ERROR;
    }

    /* ?D??DIAG???¨²¨º?¡¤?¨°??-¡ä¨°?a: ¨°??-¡ä¨°?a?¨°?¡À?¨®¡¤¦Ì??AT_OK */
    if (VOS_TRUE == stDynamicPidType.ulNvStatus)
    {
        /* 2¨¦?¡¥NV??en_NV_Item_Huawei_Dynamic_PID_Type?D¨º?¡¤?¨°??-¡ä??¨²DIAG?¨² */
        AT_GetSpecificPort(AT_DEV_DIAG,
                           stDynamicPidType.aucRewindPortStyle,
                           &ulPortPos,
                           &ulPortNum);

        if (AT_DEV_NONE == ulPortPos)
        {
            return AT_OK;
        }
    }
    else
    {
        return AT_OK;
    }

    /* DIAG???¨²2¨´¡Á¡Â¨¨¡§?T?¡ä??¨¨?: ?¡À?¨®¡¤¦Ì??AT_OK */
    if (AT_E5_RIGHT_FLAG_NO == g_enATE5RightFlag)
    {
        return AT_OK;
    }

    /* ¨¦?3yNV???D¦Ì?DIAG???¨² */
    stDynamicPidType.aucRewindPortStyle[ulPortPos] = 0;
    ulPortNum--;
    for (ulLoop = ulPortPos; ulLoop < ulPortNum; ulLoop++)
    {
        stDynamicPidType.aucRewindPortStyle[ulLoop] = stDynamicPidType.aucRewindPortStyle[ulLoop + 1UL];
    }
    stDynamicPidType.aucRewindPortStyle[ulPortNum] = 0;

    /* ???¨²¨°¨¬3¡ê¨ºy?Y¡À¡ê?¡è: ?D??o¨®¦Ì?¨¦¨¨¡À?D?¨¬??D¡ê?¦Ì¨²¨°???¨¦¨¨¡À?2??¨¹?aMASS¨¦¨¨¡À?(0xa1,0xa2) */
    if (0 != ulPortNum)
    {
        if ((AT_DEV_CDROM == stDynamicPidType.aucRewindPortStyle[0])
         || (AT_DEV_SD == stDynamicPidType.aucRewindPortStyle[0]))
        {
            return AT_OK;
        }
    }

    /* ?¨¹D????¨²?¡¥o?¨ºy?Y¦Ì?NV??en_NV_Item_Huawei_Dynamic_PID_Type */
    if (NV_OK != NV_WriteEx(MODEM_ID_0, en_NV_Item_Huawei_Dynamic_PID_Type,
                          &stDynamicPidType,
                          sizeof(AT_DYNAMIC_PID_TYPE_STRU)))
    {
        AT_ERR_LOG("AT_CloseDiagPort: Write NV fail");
        return AT_ERROR;
    }
    else
    {
        return AT_OK;
    }
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_ExistSpecificPortChange
 1|?¨¹?¨¨¨º?  : ¨º?¡¤?¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²¡À??¨¹¨¨¡§?T
 ¨º?¨¨?2?¨ºy  : VOS_UINT8                           ucPortType ???¨²¨¤¨¤D¨ª
             VOS_UINT8                           aucOldRewindPortStyle[]¡À??¨¹?¡ã¦Ì????¨²?¡¥o?
             VOS_UINT8                           aucNewRewindPortStyle[]¡À??¨¹o¨®¦Ì????¨²?¡¥o?
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             VOS_TRUE    ¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²¡À??¨¹
                                    VOS_FALSE 2?¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²¡À??¨¹
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º8??10¨¨?
    ¡Á¡Â    ??   : L00171473
    DT???¨²¨¨Y   : DTS2012082204471, TQE??¨¤¨ª
*****************************************************************************/
VOS_UINT32 AT_ExistSpecificPortChange(
    VOS_UINT8                           ucPortType,
    VOS_UINT8                           aucOldRewindPortStyle[],
    VOS_UINT8                           aucNewRewindPortStyle[]
)
{
    VOS_UINT32                          ulOldPortPos;
    VOS_UINT32                          ulNewPortPos;
    VOS_UINT32                          ulPortNum;


    ulOldPortPos = 0;
    ulNewPortPos = 0;
    ulPortNum    = 0;

    AT_GetSpecificPort(ucPortType, aucOldRewindPortStyle, &ulOldPortPos, &ulPortNum);
    AT_GetSpecificPort(ucPortType, aucNewRewindPortStyle, &ulNewPortPos, &ulPortNum);

    /* D???¨°??????¡§???¨² */
    if ((AT_DEV_NONE == ulOldPortPos)
     && (AT_DEV_NONE != ulNewPortPos))
    {
        return VOS_TRUE;
    }

    /* ¨¦?3y¨°??????¡§???¨² */
    if ((AT_DEV_NONE != ulOldPortPos)
     && (AT_DEV_NONE == ulNewPortPos))
    {
        return VOS_TRUE;
    }

    return VOS_FALSE;

}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_CheckSetPortRight
 1|?¨¹?¨¨¨º?  : ¨º?¡¤?¡ä??¨²???¡§¨¤¨¤D¨ª¦Ì????¨²¡À??¨¹
 ¨º?¨¨?2?¨ºy  : VOS_UINT8                           aucOldRewindPortStyle[]¡À??¨¹?¡ã¦Ì????¨²?¡¥o?
             VOS_UINT8                           aucNewRewindPortStyle[]¡À??¨¹o¨®¦Ì????¨²?¡¥o?
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32             AT_OK       ¨¨¡§?T?¨¬2¨¦¨ª¡§1y
                                    AT_ERROR    ¨¨¡§?T?¨¬2¨¦2?¨ª¡§1y
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º1??3¨¨?
    ¡Á¡Â    ??   : f62575
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_CheckSetPortRight(
    VOS_UINT8                           aucOldRewindPortStyle[],
    VOS_UINT8                           aucNewRewindPortStyle[]
)
{
    VOS_UINT32                          ulRet;

    ulRet = AT_ExistSpecificPortChange(AT_DEV_DIAG,
                                       aucOldRewindPortStyle,
                                       aucNewRewindPortStyle);

    if ((VOS_TRUE == ulRet)
     && (AT_E5_RIGHT_FLAG_NO == g_enATE5RightFlag))
    {
        return AT_ERROR;
    }

    return AT_OK;
}


/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetHsspt
 1|?¨¹?¨¨¨º?  : ¨¦¨¨??RRC¡ã?¡À?D??¡é,o¡¥¨ºy¦Ì?2?¨ºy?y3¡êD??¨¬2a¡¤??¨²???¡ê?¨¦¡Á?.
 ¨º?¨¨?2?¨ºy  : ucIndex    - ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : ¡¤¦Ì??3?¡ä¨ªD??¡é?¨°OK
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º4??21¨¨?
    ¡Á¡Â    ??   : l60609
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_SetHsspt(VOS_UINT8 ucIndex)
{
    VOS_UINT8                           ucRRCVer;

    /* 2?¨ºy?¨¬2¨¦ */
    if (AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_DPAUPA_ERROR;
    }

    /* 2?¨ºy1y?¨¤ */
    if (gucAtParaIndex != 1)
    {
        return AT_DPAUPA_ERROR;
    }

    /* ?¨¬2¨¦¨º?¡¤??a3y¨ºy?Y¡À¡ê?¡è,?¡ä?a3y¨º¡À¡¤¦Ì??3?¡ä¨ªD??¡é:ErrCode:0 */
    if (VOS_TRUE == g_bAtDataLocked)
    {
        return  AT_DATA_UNLOCK_ERROR;
    }

    ucRRCVer = (VOS_UINT8)gastAtParaList[0].ulParaValue;

    /* ¦Ì¡Â¨®?D¡äNV?¨®?¨²o¡¥¨ºy: AT_WriteRrcVerToNV,¡¤¦Ì??2¨´¡Á¡Â?¨¢1? */
    if (VOS_OK == AT_WriteRrcVerToNV(ucRRCVer))
    {
        return  AT_OK;
    }
    else
    {
        AT_WARN_LOG("At_SetHsspt:WARNING:Write NV failed!");
        return AT_DPAUPA_ERROR;
    }
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryHsspt
 1|?¨¹?¨¨¨º?  : 2¨¦?¡¥RRC¡ã?¡À?D??¡é
 ¨º?¨¨?2?¨ºy  : ucIndex - ¨®??¡ì?¡Â¨°y
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : ¡¤¦Ì??3?¡ä¨ªD??¡é?¨°OK
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º4??21¨¨?
    ¡Á¡Â    ??   : l60609
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy
*****************************************************************************/
VOS_UINT32 AT_QryHsspt(VOS_UINT8 ucIndex)
{
    VOS_UINT8                           ucRRCVer;
    VOS_UINT32                          ulResult;
    VOS_UINT16                          usLength;

    /* 2?¨ºy?¨¬2¨¦ */
    if (AT_CMD_OPT_READ_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_DPAUPA_ERROR;
    }

    ulResult = AT_ReadRrcVerFromNV(&ucRRCVer);

    if (VOS_OK == ulResult)
    {
        usLength = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN, (TAF_CHAR *)pgucAtSndCodeAddr,
                                          (VOS_CHAR *)pgucAtSndCodeAddr, "%s:",
                                          g_stParseContext[ucIndex].pstCmdElement->pszCmdName);
        usLength += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN, (TAF_CHAR *)pgucAtSndCodeAddr,
                                           (VOS_CHAR *)pgucAtSndCodeAddr + usLength, "%d",
                                           (VOS_UINT32)ucRRCVer);
        gstAtSendData.usBufLen = usLength;
        return  AT_OK;
    }
    else
    {
        AT_WARN_LOG("AT_QryHspaSpt:WARNING:WAS_MNTN_QueryHspaSpt failed!");
        return AT_DPAUPA_ERROR;
    }
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_TestHsicCmdPara
 1|?¨¹?¨¨¨º?  : HSIC¨ª¡§¦Ì¨¤?¨¹¨¢?2a¨º??¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º04??19¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : AP-Modem??¨ª????¡§????D???o¡¥¨ºy
  2.¨¨?    ?¨²   : 2012?¨º8??13¨¨?
    ¡Á¡Â    ??   : l60609
    DT???¨²¨¨Y   : MUX:???¨®MUX¨ª¡§¦Ì¨¤¦Ì?¡ä|¨¤¨ª
*****************************************************************************/
VOS_UINT32 AT_TestHsicCmdPara(VOS_UINT8 ucIndex)
{
    /* ¨ª¡§¦Ì¨¤?¨¬2¨¦ */
    /* Modified by L60609 for MUX¡ê?2012-08-13,  Begin */
    if (VOS_FALSE == AT_IsApPort(ucIndex))
    /* Modified by L60609 for MUX¡ê?2012-08-13,  End */
    {
        return AT_ERROR;
    }

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : At_TestTdsScalibPara
 1|?¨¹?¨¨¨º?  : ^SCALIB2a¨º??¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º05??30¨¨?
    ¡Á¡Â    ??   : z00212940
    DT???¨²¨¨Y   : TDSD???o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 At_TestTdsScalibPara(VOS_UINT8 ucIndex)
{
    VOS_UINT16                           usLength;

    usLength = 0;
    usLength = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN, (VOS_CHAR*)pgucAtSndCodeAddr,
                                        (VOS_CHAR *)pgucAtSndCodeAddr + usLength,
                                        "%s:%s", g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                        AT_TDS_SCALIB_TEST_STR);
    gstAtSendData.usBufLen = usLength;
    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_TestSimlockUnlockPara
 1|?¨¹?¨¨¨º?  : ^SIMLOCKUNLOCK2a¨º??¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2012?¨º9??19¨¨?
    ¡Á¡Â    ??   : ¨¤?¡Á??¡ê/00198894
    DT???¨²¨¨Y   : STK213?¨¬?D??¡ãDCMD¨¨?¨®?a¡¤¡é????D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_TestSimlockUnlockPara( VOS_UINT8 ucIndex )
{
    /* ¨ª¡§¦Ì¨¤?¨¬2¨¦ */
    if (VOS_FALSE == AT_IsApPort(ucIndex))
    {
        return AT_ERROR;
    }

    gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                    (VOS_CHAR *)pgucAtSndCodeAddr,
                                                    (VOS_CHAR *)pgucAtSndCodeAddr,
                                                    "%s: (\"NET\",\"NETSUB\",\"SP\")",
                                                    g_stParseContext[ucIndex].pstCmdElement->pszCmdName);

    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_String2Hex
 1|?¨¹?¨¨¨º?  : ¨ª¨º3¨¦¡Á?¡¤?¡ä?¡Áa16????¨ºy1|?¨¹
 ¨º?¨¨?2?¨ºy  : nptr [in/out] ¨º?¨¨?¦Ì?¡Á?¡¤?¡ä??¨²¨¨Y????
             usLen [in] ¨º?¨¨?¦Ì?¡Á?¡¤?¡ä?3¡è?¨¨
 ¨º?3?2?¨ºy  : pRtn [in/out] ¨®¨¦¡Á?¡¤?¡ä?¡Áa???¨´¦Ì???D¨ª?¦Ì
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º06??28¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : ¨°??2¡À¡À???-¨®DAT ?¨¹¨¢??¨¢D¡äNV2¨´¡Á¡Â
*****************************************************************************/
VOS_UINT32 AT_String2Hex( VOS_UINT8 *nptr,VOS_UINT16 usLen, VOS_UINT32 *pRtn)
{
    VOS_UINT32                          c     = 0;         /* current Char */
    VOS_UINT32                          total = 0;         /* current total */
    VOS_UINT8                           Length = 0;        /* current Length */

    c = (VOS_UINT32)*nptr++;

    while(Length++ < usLen)
    {
        if( (c  >= '0') && (c  <= '9') )
        {
            c  = c  - '0';
        }
        else if( (c  >= 'a') && (c  <= 'f') )
        {
            c  = c  - 'a' + 10;
        }
        else if( (c  >= 'A') && (c  <= 'F') )
        {
            c  = c  - 'A' + 10;
        }
        else
        {
            return VOS_ERR;
        }

        if(total > 0x0FFFFFFF)              /* ¡¤¡é¨¦¨²¡¤¡ä¡Áa */
        {
            return VOS_ERR;
        }
        else
        {
            total = (total << 4) + c;       /* accumulate digit */
            c = (VOS_UINT32)(*(nptr++));    /* get next Char */
        }
    }
     /* return result, negated if necessary */
    *pRtn = total;
    return AT_SUCCESS;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_NVWRGetParaInfo
 1|?¨¹?¨¨¨º?  : ??¨¨?¨º?¨¨?2?¨ºyD??¡é
 ¨º?¨¨?2?¨ºy  : *pucPara  :
             *pucValue :
             **pucParaDst

 ¨º?3?2?¨ºy  :
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º06??28¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : ¨°??2¡À¡À???-¨®DAT ?¨¹¨¢??¨¢D¡äNV2¨´¡Á¡Â
*****************************************************************************/
VOS_UINT32 AT_NVWRGetItemValue( VOS_UINT8 *pucPara,  VOS_UINT8 *pucValue,  VOS_UINT8 **pucParaDst)
{
    VOS_UINT32                          ulTmp = 0;
    VOS_UINT8                          *pucStart = pucPara;
    VOS_UINT16                          usLen = 0;
    VOS_UINT8                          *pucEnd = VOS_NULL_PTR;
    VOS_UINT32                          ulRet;

    /* ¦Ì¡Â¨®?¦Ì?¦Ì?¡¤?¡À¡ê?¡èpucPara,pucValue,pucParaDst2??aNULL */

    /* ?¡À¦Ì?¦Ì¨²¨°???2?¨º?' '¦Ì?¡Á?¡¤? */
    while(' ' == *pucStart)
    {
        pucStart++;
    }

    if(' ' == *(pucStart+1))
    {
        usLen = 1;
        pucEnd = pucStart+2;
    }
    else if(' ' == *(pucStart+2))
    {
        usLen = 2;
        pucEnd = pucStart+3;
    }
    else
    {
        return VOS_ERR;
    }

    ulRet = AT_String2Hex(pucStart, usLen, &ulTmp);
    if((VOS_OK != ulRet) || (ulTmp > 0xff))
    {
        return VOS_ERR;
    }

    *pucValue = (VOS_UINT8)ulTmp;
    *pucParaDst = pucEnd;

    return VOS_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_NVWRGetParaInfo
 1|?¨¹?¨¨¨º?  : ^NVWRITE?¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  :
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º06??28¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : ¨°??2¡À¡À???-¨®DAT ?¨¹¨¢??¨¢D¡äNV2¨´¡Á¡Â
*****************************************************************************/
VOS_UINT32 AT_NVWRGetParaInfo( AT_PARSE_PARA_TYPE_STRU * pstPara, VOS_UINT8 * pu8Data, VOS_UINT32 * pulLen)
{
    VOS_UINT32                          ulNum = 0;
    VOS_UINT8                          *pu8Start   = VOS_NULL_PTR;
    VOS_UINT8                          *pu8ParaTmp = VOS_NULL_PTR;
    VOS_UINT16                          usLen = 0;
    VOS_UINT32                          ulRet;
    VOS_UINT16                          i = 0;

    /* ¦Ì¡Â¨®?¦Ì?¦Ì?¡¤?¡À¡ê?¡èpstPara,pu8Data2??aNULL */

    pu8Start = pstPara->aucPara;
    usLen= pstPara->usParaLen;

    if(usLen < AT_PARA_MAX_LEN)
    {
        pstPara->aucPara[usLen] = ' ';
    }
    else
    {
        return VOS_ERR;
    }

    ulNum = 0;
    for(i = 0; i < usLen; )
    {
        ulRet = AT_NVWRGetItemValue(pu8Start, (pu8Data+ulNum), &pu8ParaTmp);
        if(ERR_MSP_SUCCESS != ulRet)
        {
            return ulRet;
        }

        ulNum++;

        /* ¡Á??¨¤128?? */
        /*MAX_NV_NUM_PER_PARA */
        if(ulNum == 128)
        {
            break;
        }

        if(pu8ParaTmp >= (pu8Start+usLen))
        {
            break;
        }

        i += (VOS_UINT16)(pu8ParaTmp - pu8Start);
        pu8Start = pu8ParaTmp;
    }

    *pulLen = ulNum;
    return VOS_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetNVReadPara
 1|?¨¹?¨¨¨º?  : ^NVREAD?¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º06??28¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : ¨°??2¡À¡À???-¨®DAT ?¨¹¨¢??¨¢D¡äNV2¨´¡Á¡Â
*****************************************************************************/
VOS_UINT32 AT_SetNVReadPara(VOS_UINT8 ucIndex)
{
    VOS_UINT16                          usNvId  = 0;
    VOS_UINT32                          ulNvLen = 0;
    VOS_UINT8                          *pucData = VOS_NULL_PTR;
    VOS_UINT32                          i       = 0;
    MODEM_ID_ENUM_UINT16                enModemId = MODEM_ID_0;
    VOS_UINT32                          ulRet;

    /* 2?¨ºy?¨¬2¨¦ */
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        g_ulNVRD = 1;
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* 2?¨ºy1y?¨¤ */
    if(gucAtParaIndex > 1)
    {
        g_ulNVRD = 2;
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* 2?¨ºy?a?? */
    if(0 == gastAtParaList[0].usParaLen)
    {
        g_ulNVRD = 3;
        return AT_CME_INCORRECT_PARAMETERS;
    }
    else
    {
        usNvId = (VOS_UINT16)gastAtParaList[0].ulParaValue;
    }

    ulRet = NV_GetLength(usNvId, &ulNvLen);

    if(VOS_OK != ulRet)
    {
        g_ulNVRD = 4;
        return AT_ERROR;
    }

    /* 3¡è?¨¨¡ä¨®¨®¨²128¡ê???¨¨??¡ã128??¡Á??¨²*/
    pucData = (VOS_UINT8*)PS_MEM_ALLOC(WUEPS_PID_AT, ulNvLen);
    if(VOS_NULL_PTR == pucData)
    {
        g_ulNVRD = 5;
        return AT_ERROR;
    }

    ulRet = AT_GetModemIdFromClient(ucIndex, &enModemId);

    if (VOS_OK != ulRet)
    {
        AT_ERR_LOG("AT_SetNVReadPara:Get modem id fail");

        PS_MEM_FREE(WUEPS_PID_AT, pucData);

        g_ulNVWR =8;
        return AT_ERROR;
    }

    ulRet = NV_ReadEx(enModemId, usNvId, (VOS_VOID*)pucData, ulNvLen);

    if(VOS_OK != ulRet)
    {
        PS_MEM_FREE(WUEPS_PID_AT, pucData);

        g_ulNVRD = 6;
        return AT_ERROR;
    }
    gstAtSendData.usBufLen = 0;
    gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN, (VOS_CHAR *)pgucAtSndCodeAddr,(VOS_CHAR*)pgucAtSndCodeAddr,
        "^NVRD: %d,", ulNvLen);

    for(i = 0; i < ulNvLen; i++)
    {
        if(0 == i)
        {
            gstAtSendData.usBufLen += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                (VOS_CHAR *)pgucAtSndCodeAddr,(VOS_CHAR*)pgucAtSndCodeAddr + gstAtSendData.usBufLen,"%02X", pucData[i]);
        }
        else
        {
            gstAtSendData.usBufLen += (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                (VOS_CHAR *)pgucAtSndCodeAddr,(VOS_CHAR*)pgucAtSndCodeAddr + gstAtSendData.usBufLen," %02X", pucData[i]);
        }
    }

    PS_MEM_FREE(WUEPS_PID_AT, pucData);
    g_ulNVRD = 7;
    return AT_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetNVReadPara
 1|?¨¹?¨¨¨º?  : ^NVWRITE?¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º06??28¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : ¨°??2¡À¡À???-¨®DAT ?¨¹¨¢??¨¢D¡äNV2¨´¡Á¡Â
  2.¨¨?    ?¨²   : 2015?¨º04??04¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : NVWR?¨¹¨¢?¡ã2¨¨?????
*****************************************************************************/
VOS_UINT32 AT_SetNVWritePara(VOS_UINT8 ucIndex)
{
    VOS_UINT16                          usNvId = 0;
    VOS_UINT16                          usNvTotleLen = 0;
    VOS_UINT32                          ulNvLen = 0; /* VOS_UINT16 -> VOS_UINT32 */
    VOS_UINT8                          *pucData = VOS_NULL_PTR;
    VOS_UINT32                          ulNvNum = 0; /* VOS_UINT16 -> VOS_UINT32 */
    VOS_UINT8                           au8Data[128] = {0};/* MAX_NV_NUM_PER_PARA */
    MODEM_ID_ENUM_UINT16                enModemId = MODEM_ID_0;
    VOS_UINT32                          i = 0;
    VOS_UINT32                          ulRet;

    gstAtSendData.usBufLen = 0;

    /* 2?¨ºy?¨¬2¨¦ */
    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        g_ulNVWR =1;
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* 2?¨ºy?a?? */
    if((0 == gastAtParaList[0].usParaLen)
        || (0 == gastAtParaList[1].usParaLen)
        || (0 == gastAtParaList[2].usParaLen))
    {
        g_ulNVWR =2;
        return AT_CME_INCORRECT_PARAMETERS;
    }

    usNvId = (VOS_UINT16)gastAtParaList[0].ulParaValue;

    if (VOS_TRUE != AT_IsNVWRAllowedNvId(usNvId))
    {
        g_ulNVWR = 10;
        return AT_CME_OPERATION_NOT_ALLOWED;
    }

    (VOS_VOID)vos_printf("\n atSetNVWRPara usNvId = %d\n",usNvId);

    usNvTotleLen = (VOS_UINT16)gastAtParaList[1].ulParaValue;
    (VOS_VOID)vos_printf("\n atSetNVWRPara usNvTotleLen = %d\n",usNvTotleLen);

    pucData = PS_MEM_ALLOC(WUEPS_PID_AT, usNvTotleLen);
    if(VOS_NULL_PTR == pucData)
    {
        g_ulNVWR =3;
        return AT_ERROR;
    }

    i = 0;
    while(0 != gastAtParaList[2UL + i].usParaLen)
    {
        ulRet = AT_NVWRGetParaInfo((AT_PARSE_PARA_TYPE_STRU*)(&(gastAtParaList[2UL + i])), au8Data, &ulNvNum);

        if(VOS_OK != ulRet)
        {
            PS_MEM_FREE(WUEPS_PID_AT, pucData);
            g_ulNVWR =4;
            return AT_CME_INCORRECT_PARAMETERS;
        }

        /* ¨¨?1?2?¨ºy¦Ì?3¡è?¨¨¡ä¨®¨®¨²128¡ê??¨°¡¤¦Ì??¨º¡ì¡ã¨¹ */
        /*MAX_NV_NUM_PER_PARA */
        if(ulNvNum > 128)
        {
            PS_MEM_FREE(WUEPS_PID_AT, pucData);
            g_ulNVWR =5;
            return AT_CME_INCORRECT_PARAMETERS;
        }

        /* ¨¨?1?¨¤??¨®¦Ì?2?¨ºy??¨ºy¡ä¨®¨®¨²¡Á¨¹3¡è?¨¨ */
        if((ulNvLen+ulNvNum) > usNvTotleLen)
        {
            PS_MEM_FREE(WUEPS_PID_AT, pucData);
            g_ulNVWR =6;
            return AT_CME_INCORRECT_PARAMETERS;
        }

        PS_MEM_CPY((pucData + ulNvLen), au8Data, ulNvNum);

        ulNvLen += ulNvNum;
        i++;

        if(i >= (AT_MAX_PARA_NUMBER-2))
        {
            break;
        }
    }

    /* ¨¨?1?¨¤??¨®¦Ì?2?¨ºy??¨ºy¨®?¡Á¨¹3¡è?¨¨2??¨¤¦Ì¨¨ */
    if(ulNvLen != usNvTotleLen)
    {
        PS_MEM_FREE(WUEPS_PID_AT, pucData);
        g_ulNVWR =7;
        return AT_CME_INCORRECT_PARAMETERS;
    }

    ulRet = AT_GetModemIdFromClient(ucIndex, &enModemId);

    if (VOS_OK != ulRet)
    {
        AT_ERR_LOG("AT_SetNVWritePara:Get modem id fail");
        PS_MEM_FREE(WUEPS_PID_AT, pucData);
        g_ulNVWR =8;
        return AT_ERROR;
    }

    ulRet = NV_WriteEx(enModemId, usNvId, (VOS_VOID*)pucData, usNvTotleLen);

    if(VOS_OK != ulRet)
    {
        PS_MEM_FREE(WUEPS_PID_AT, pucData);
        g_ulNVWR =9;

        return AT_ERROR;
    }

    PS_MEM_FREE(WUEPS_PID_AT, pucData);
    g_ulNVWR =10;

    return AT_OK;
}


/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetNVWRPartPara
 1|?¨¹?¨¨¨º?  : ^NVWRLEN¨¦¨¨???¨¹¨¢?¡ä|¨¤¨ª
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucClientId
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2015?¨º4??21¨¨?
    ¡Á¡Â    ??   : s00318873
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy for DTS2015042202710

  2.¨¨?    ?¨²   : 2015?¨º04??04¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : NVWR?¨¹¨¢?¡ã2¨¨?????

*****************************************************************************/
VOS_UINT32 AT_SetNVWRPartPara(VOS_UINT8 ucClientId)
{
    VOS_UINT32                          ulRet;
    VOS_UINT16                          usNVID;
    VOS_UINT32                          ulNVWrTotleLen;
    VOS_UINT32                          ulNVLen;
    VOS_UINT16                          usNVWrLen;
    VOS_UINT8                          *pucNvWrData = VOS_NULL_PTR;
    VOS_UINT32                          ulNVNum;
    VOS_UINT32                          i;
    VOS_UINT8                           aucData[128];
    VOS_UINT16                          usOffset;
    MODEM_ID_ENUM_UINT16                enModemId;

    i                       = 0;
    ulNVLen                 = 0;
    gstAtSendData.usBufLen  = 0;
    ulNVWrTotleLen          = 0;
    PS_MEM_SET(aucData,0,sizeof(aucData));

    if(AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    if( (0 == gastAtParaList[0].usParaLen)
     || (0 == gastAtParaList[1].usParaLen)
     || (0 == gastAtParaList[2].usParaLen)
     || (0 == gastAtParaList[3].usParaLen) )
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    usNVID       = (VOS_UINT16)gastAtParaList[0].ulParaValue;
    usOffset     = (VOS_UINT16)gastAtParaList[1].ulParaValue;
    usNVWrLen    = (VOS_UINT16)gastAtParaList[2].ulParaValue;

    if (VOS_TRUE != AT_IsNVWRAllowedNvId(usNVID))
    {
        return AT_CME_OPERATION_NOT_ALLOWED;
    }

    /* check param#3 usNVWrLen */
    if (usNVWrLen == 0)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* get NV length */
    ulRet        = NV_GetLength(usNVID, &ulNVWrTotleLen);
    if(ERR_MSP_SUCCESS != ulRet)
    {
        return AT_ERROR;
    }

    /* check param#2 usOffset */
    if(((VOS_UINT32)usOffset > (ulNVWrTotleLen - 1)) || ((VOS_UINT32)(usOffset + usNVWrLen) > ulNVWrTotleLen))
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    pucNvWrData = PS_MEM_ALLOC(WUEPS_PID_AT, usNVWrLen);
    if(NULL == pucNvWrData)
    {
        return AT_ERROR;
    }

    /* get NV value form param#4\5\...\#16 */
    while(0 != gastAtParaList[3UL + i].usParaLen)
    {
        ulRet = AT_NVWRGetParaInfo((AT_PARSE_PARA_TYPE_STRU*)(&(gastAtParaList[3UL + i])), aucData, (VOS_UINT32 *)&ulNVNum);
        if(ERR_MSP_SUCCESS != ulRet)
        {
            PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
            return AT_CME_INCORRECT_PARAMETERS;
        }

        if(ulNVNum > 128)
        {
            PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
            return AT_CME_INCORRECT_PARAMETERS;
        }

        if((ulNVLen+ulNVNum) > usNVWrLen)
        {
            PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
            return AT_CME_INCORRECT_PARAMETERS;
        }

        PS_MEM_CPY(((VOS_UINT8*)pucNvWrData + ulNVLen), (VOS_UINT8*)aucData, ulNVNum);

        ulNVLen += ulNVNum;
        i++;

        if(i >= (AT_MAX_PARA_NUMBER - 3))
        {
            break;
        }

    }

    /* check all the nv value have the exact length by param#3 */
    if(ulNVLen != usNVWrLen)
    {
        PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
        return AT_CME_INCORRECT_PARAMETERS;
    }

    ulRet = AT_GetModemIdFromClient(ucClientId, &enModemId);
    if (VOS_OK != ulRet)
    {
        AT_ERR_LOG("AT_SetNVWritePara:Get modem id fail");
        PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
        return AT_ERROR;
    }

    if (enModemId >= MODEM_ID_BUTT)
    {
        PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
        return AT_ERROR;
    }

    ulRet = NV_WritePartEx(enModemId, usNVID, usOffset, (VOS_VOID*)pucNvWrData, usNVWrLen);
    if(ERR_MSP_SUCCESS != ulRet)
    {
        PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);
        return AT_ERROR;
    }

    PS_MEM_FREE(WUEPS_PID_AT, pucNvWrData);

    return AT_OK;
}


/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_GetNvRdDebug
 1|?¨¹?¨¨¨º?  : ??¨º?NV?¨¢D¡ä¦Ì¡Â2aD??¡é
 ¨º?¨¨?2?¨ºy  :
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_VOID
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º06??28¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : ¨°??2¡À¡À???-¨®DAT ?¨¹¨¢??¨¢D¡äNV2¨´¡Á¡Â
*****************************************************************************/
VOS_VOID AT_GetNvRdDebug(VOS_VOID)
{
    (VOS_VOID)vos_printf("\n g_ulNVRD=0x%x \n",g_ulNVRD);
    (VOS_VOID)vos_printf("\n g_ulNVWR=0x%x \n",g_ulNVWR);
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryFPllStatusPara
 1|?¨¹?¨¨¨º?  : 2¨¦?¡¥G?¨°W PLL¡Á¡ä¨¬?
 ¨º?¨¨?2?¨ºy  : ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º11??29¨¨?
    ¡Á¡Â    ??   : L00256032
    DT???¨²¨¨Y   : Added for PLL status query
*****************************************************************************/
VOS_UINT32 AT_QryFPllStatusPara(VOS_UINT8 ucIndex)
{
    VOS_UINT32                          ulReceiverPid;
    AT_PHY_RF_PLL_STATUS_REQ_STRU      *pstMsg;
    VOS_UINT32                          ulLength;
    VOS_UINT16                          usMsgId;
    if ((AT_RAT_MODE_FDD_LTE == g_stAtDevCmdCtrl.ucDeviceRatMode)
            ||(AT_RAT_MODE_TDD_LTE == g_stAtDevCmdCtrl.ucDeviceRatMode))
    {
        return atQryFPllStatusPara(ucIndex);
    }
    /*?D??¦Ì¡À?¡ã?¨®¨¨??¡ê¨º?¡ê????¡ì3?G/W*/
    if (AT_RAT_MODE_WCDMA == g_stAtDevCmdCtrl.ucDeviceRatMode)
    {
        ulReceiverPid = AT_GetDestPid(ucIndex, I0_DSP_PID_WPHY);
        usMsgId       = ID_AT_WPHY_RF_PLL_STATUS_REQ;
    }
    else if ( (AT_RAT_MODE_GSM == g_stAtDevCmdCtrl.ucDeviceRatMode)
            ||(AT_RAT_MODE_EDGE == g_stAtDevCmdCtrl.ucDeviceRatMode) )
    {
        ulReceiverPid = AT_GetDestPid(ucIndex, I0_DSP_PID_GPHY);
        usMsgId       = ID_AT_GPHY_RF_PLL_STATUS_REQ;
    }

    else
    {
        return AT_DEVICE_MODE_ERROR;
    }

    /* ¨¦¨º??AT_PHY_RF_PLL_STATUS_REQ_STRU???¡é */
    ulLength = sizeof(AT_PHY_RF_PLL_STATUS_REQ_STRU) - VOS_MSG_HEAD_LENGTH;
    pstMsg   = (AT_PHY_RF_PLL_STATUS_REQ_STRU *)PS_ALLOC_MSG(WUEPS_PID_AT, ulLength);

    if (VOS_NULL_PTR == pstMsg)
    {
        AT_WARN_LOG("AT_QryFPllStatusPara: Alloc msg fail!");
        return AT_ERROR;
    }

    /* ¨¬?3????¡é */
    pstMsg->ulReceiverPid = ulReceiverPid;
    pstMsg->usMsgID       = usMsgId;
    pstMsg->usRsv1        = 0;
    pstMsg->usDspBand     = g_stAtDevCmdCtrl.stDspBandArfcn.usDspBand;
    pstMsg->usRsv2        = 0;

    /* ?¨°??¨®|PHY¡¤¡é?¨ª???¡é */
    if (VOS_OK != PS_SEND_MSG(WUEPS_PID_AT, pstMsg))
    {
        AT_WARN_LOG("AT_QryFPllStatusPara: Send msg fail!");
        return AT_ERROR;
    }

    /* ¨¦¨¨??¦Ì¡À?¡ã2¨´¡Á¡Â¨¤¨¤D¨ª */
    gastAtClientTab[ucIndex].CmdCurrentOpt = AT_CMD_FPLLSTATUS_QRY;
    g_stAtDevCmdCtrl.ucIndex               = ucIndex;

    /* ¡¤¦Ì???¨¹¨¢?¡ä|¨¤¨ª1¨°?e¡Á¡ä¨¬? */
    return AT_WAIT_ASYNC_RETURN;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : At_RfPllStatusCnfProc
 1|?¨¹?¨¨¨º?  : AT¡ä|¨¤¨ªGPHY/WPHY???¡ä¦Ì?PLL¡Á¡ä¨¬?2¨¦?¡¥?¨¬¨®|???¡é
 ¨º?¨¨?2?¨ºy  : pstMsg
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_VOID
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2013?¨º11??29¨¨?
    ¡Á¡Â    ??   : L00256032
    DT???¨²¨¨Y   : Added for PLL status query
*****************************************************************************/
VOS_VOID At_RfPllStatusCnfProc(PHY_AT_RF_PLL_STATUS_CNF_STRU *pstMsg)
{
    VOS_UINT8                           ucIndex;
    VOS_UINT16                          usLength;

    /* ??¨¨?¡À?¦Ì?¡À¡ê¡ä?¦Ì?¨®??¡ì?¡Â¨°y */
    ucIndex = g_stAtDevCmdCtrl.ucIndex;

    if (AT_CMD_FPLLSTATUS_QRY != gastAtClientTab[ucIndex].CmdCurrentOpt)
    {
        AT_WARN_LOG("At_RfPllStatusCnfProc: CmdCurrentOpt is not AT_CMD_FPLLSTATUS_QRY!");
        return;
    }

    /* ?¡ä??AT¡Á¡ä¨¬? */
    AT_STOP_TIMER_CMD_READY(ucIndex);

    usLength = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                       (VOS_CHAR *)pgucAtSndCodeAddr,
                                       (VOS_CHAR *)pgucAtSndCodeAddr,
                                       "%s: %d,%d",
                                       g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                       pstMsg->usTxStatus,
                                       pstMsg->usRxStatus);

    gstAtSendData.usBufLen = usLength;

    At_FormatResultData(ucIndex, AT_OK);

    return;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryFpowdetTPara
 1|?¨¹?¨¨¨º?  : ?¨¢??¡ä??¡ÂPDEG?¦Ì
 ¨º?¨¨?2?¨ºy  : ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2014?¨º5??6¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : Added for PDEA status query
*****************************************************************************/
VOS_UINT32 AT_QryFpowdetTPara(VOS_UINT8 ucIndex)
{
    AT_PHY_POWER_DET_REQ_STRU          *pstMsg;
    VOS_UINT32                          ulLength;

    /*?D??¦Ì¡À?¡ã?¨®¨¨??¡ê¨º?¡ê????¡ì3?W*/
    if (AT_RAT_MODE_WCDMA != g_stAtDevCmdCtrl.ucDeviceRatMode)
    {
        return AT_DEVICE_MODE_ERROR;
    }

    /* ¨¦¨º??AT_PHY_POWER_DET_REQ_STRU???¡é */
    ulLength = sizeof(AT_PHY_POWER_DET_REQ_STRU) - VOS_MSG_HEAD_LENGTH;
    pstMsg   = (AT_PHY_POWER_DET_REQ_STRU *)PS_ALLOC_MSG(WUEPS_PID_AT, ulLength);

    if (VOS_NULL_PTR == pstMsg)
    {
        AT_WARN_LOG("AT_QryFpowdetTPara: Alloc msg fail!");
        return AT_ERROR;
    }

    /* ¨¬?3????¡é */
    pstMsg->ulReceiverPid = AT_GetDestPid(ucIndex, I0_DSP_PID_WPHY);
    pstMsg->usMsgID       = ID_AT_WPHY_POWER_DET_REQ;
    pstMsg->usRsv         = 0;

    /* ?¨°??¨®|PHY¡¤¡é?¨ª???¡é */
    if (VOS_OK != PS_SEND_MSG(WUEPS_PID_AT, pstMsg))
    {
        AT_WARN_LOG("AT_QryFpowdetTPara: Send msg fail!");
        return AT_ERROR;
    }

    /* ¨¦¨¨??¦Ì¡À?¡ã2¨´¡Á¡Â¨¤¨¤D¨ª */
    gastAtClientTab[ucIndex].CmdCurrentOpt = AT_CMD_FPOWDET_QRY;
    g_stAtDevCmdCtrl.ucIndex               = ucIndex;

    /* ¡¤¦Ì???¨¹¨¢?¡ä|¨¤¨ª1¨°?e¡Á¡ä¨¬? */
    return AT_WAIT_ASYNC_RETURN;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : At_RfFPOWDETCnfProc
 1|?¨¹?¨¨¨º?  : AT¡ä|¨¤¨ªWPHY???¡ä?¨¢¦Ì?¦Ì???¡ä??¡ÂPDEG?¦Ì
 ¨º?¨¨?2?¨ºy  : pstMsg
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_VOID

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2014?¨º5??6¨¨?
    ¡Á¡Â    ??   : d00212987
    DT???¨²¨¨Y   : Added for PDEA status query
*****************************************************************************/
VOS_VOID At_RfFpowdetTCnfProc(PHY_AT_POWER_DET_CNF_STRU *pstMsg)
{
    VOS_UINT8                           ucIndex;
    VOS_UINT16                          usLength;

    /* ??¨¨?¡À?¦Ì?¡À¡ê¡ä?¦Ì?¨®??¡ì?¡Â¨°y */
    ucIndex = g_stAtDevCmdCtrl.ucIndex;

    if (AT_CMD_FPOWDET_QRY != gastAtClientTab[ucIndex].CmdCurrentOpt)
    {
        AT_WARN_LOG("At_RfFPOWDETCnfProc: CmdCurrentOpt is not AT_CMD_FPOWDET_QRY!");
        return;
    }

    /* ?¡ä??AT¡Á¡ä¨¬? */
    AT_STOP_TIMER_CMD_READY(ucIndex);

    /* ¨®|??¨¤¨ª2?¨°a?¨®¡ê?¨¨?1?¡¤¦Ì???¦Ì?a0x7FFF?¨°?a?TD¡ì?¦Ì¡ê???2¨¦?¡¥??¡¤¦Ì??ERROR */
    if(0x7FFF == pstMsg->sPowerDet)
    {
        gstAtSendData.usBufLen = 0;
        At_FormatResultData(ucIndex, AT_ERROR);
    }
    else
    {
        usLength = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                           (VOS_CHAR *)pgucAtSndCodeAddr,
                                           (VOS_CHAR *)pgucAtSndCodeAddr,
                                           "%s: %d",
                                           g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                           pstMsg->sPowerDet);

        gstAtSendData.usBufLen = usLength;

        At_FormatResultData(ucIndex, AT_OK);
    }

    return;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_SetNvwrSecCtrlPara
 1|?¨¹?¨¨¨º?  : ^NVWRSECCTRL¨¦¨¨???¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2015?¨º04??04¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : D???o¡¥¨ºy
*****************************************************************************/
VOS_UINT32 AT_SetNvwrSecCtrlPara(VOS_UINT8 ucIndex)
{
    VOS_UINT32                          ulResult;
    AT_MTA_NVWRSECCTRL_SET_REQ_STRU     stNvwrSecCtrl;
    VOS_UINT16                          usLength;

    /* ??2?¡À?¨¢?3?¨º??¡¥ */
    PS_MEM_SET(&stNvwrSecCtrl, 0x00, sizeof(stNvwrSecCtrl));

    /* 2?¨ºy?¨¬2¨¦ */
    if (AT_CMD_OPT_SET_PARA_CMD != g_stATParseCmd.ucCmdOptType)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

     /* 2?¨ºy1y?¨¤ */
    if (gucAtParaIndex > 2)
    {
        return AT_TOO_MANY_PARA;
    }

    /* ?¨¬2¨¦??¨¢¡Â2?¨ºy3¡è?¨¨ */
    if (AT_NVWRSECCTRL_PARA_SECTYPE_LEN != gastAtParaList[0].usParaLen)
    {
        return AT_CME_INCORRECT_PARAMETERS;
    }

    /* ¨¦¨¨??¡ã2¨¨?????¨¤¨¤D¨ª */
    stNvwrSecCtrl.ucSecType = (VOS_UINT8)gastAtParaList[0].ulParaValue;

    /* ??¡Á?¡¤?¡ä?2?¨ºy¡Áa???a??¨¢¡Â */
    usLength = gastAtParaList[1].usParaLen;
    if ( (2 == gucAtParaIndex)
      && (AT_RSA_CIPHERTEXT_PARA_LEN == usLength) )
    {
        if ( (AT_SUCCESS == At_AsciiNum2HexString(gastAtParaList[1].aucPara, &usLength))
          && (AT_RSA_CIPHERTEXT_LEN == usLength) )
        {
            stNvwrSecCtrl.ucSecStrFlg = VOS_TRUE;
            PS_MEM_CPY(stNvwrSecCtrl.aucSecString, gastAtParaList[1].aucPara, AT_RSA_CIPHERTEXT_LEN);
        }
    }

    ulResult = AT_FillAndSndAppReqMsg(gastAtClientTab[ucIndex].usClientId,
                                      gastAtClientTab[ucIndex].opId,
                                      ID_AT_MTA_NVWRSECCTRL_SET_REQ,
                                      &stNvwrSecCtrl,
                                      sizeof(stNvwrSecCtrl),
                                      I0_UEPS_PID_MTA);

    if (TAF_SUCCESS != ulResult)
    {
        AT_WARN_LOG("AT_SetNvwrSecCtrlPara: AT_FillAndSndAppReqMsg fail.");
        return AT_ERROR;
    }

    /* ¨¦¨¨??AT?¡ê?¨¦¨º¦Ì¨¬?¦Ì?¡Á¡ä¨¬??a¦Ì¨¨¡äy¨°¨¬2?¡¤¦Ì?? */
    gastAtClientTab[ucIndex].CmdCurrentOpt = AT_CMD_NVWRSECCTRL_SET;

    return AT_WAIT_ASYNC_RETURN;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_RcvMtaNvwrSecCtrlSetCnf
 1|?¨¹?¨¨¨º?  : AT?¡ê?¨¦¨º?¦Ì?MTA?¡ê?¨¦???¡é¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_VOID *pMsg
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2015?¨º04??04¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : D???o¡¥¨ºy
*****************************************************************************/
VOS_UINT32 AT_RcvMtaNvwrSecCtrlSetCnf( VOS_VOID *pMsg )
{
    AT_MTA_MSG_STRU                    *pstRcvMsg;
    MTA_AT_RESULT_CNF_STRU             *pstResult;
    VOS_UINT8                           ucIndex;
    VOS_UINT32                          ulResult;

    /* 3?¨º??¡¥ */
    pstRcvMsg       = (AT_MTA_MSG_STRU *)pMsg;
    pstResult       = (MTA_AT_RESULT_CNF_STRU *)pstRcvMsg->aucContent;
    ucIndex         = AT_BROADCAST_CLIENT_INDEX_MODEM_0;

    /* ¨ª¡§1yClientId??¨¨?ucIndex */
    if (AT_FAILURE == At_ClientIdToUserId(pstRcvMsg->stAppCtrl.usClientId, &ucIndex))
    {
        AT_WARN_LOG("AT_RcvMtaNvwrSecCtrlSetCnf: WARNING:AT INDEX NOT FOUND!");
        return VOS_ERR;
    }

    if (AT_IS_BROADCAST_CLIENT_INDEX(ucIndex))
    {
        AT_WARN_LOG("AT_RcvMtaNvwrSecCtrlSetCnf: AT_BROADCAST_INDEX.");
        return VOS_ERR;
    }

    /* ?D??¦Ì¡À?¡ã2¨´¡Á¡Â¨¤¨¤D¨ª¨º?¡¤??aAT_CMD_NVWRSECCTRL_SET */
    if (AT_CMD_NVWRSECCTRL_SET != gastAtClientTab[ucIndex].CmdCurrentOpt)
    {
        AT_WARN_LOG("AT_RcvMtaNvwrSecCtrlSetCnf: NOT CURRENT CMD OPTION!");
        return VOS_ERR;
    }

    /* ?¡ä??AT¡Á¡ä¨¬? */
    AT_STOP_TIMER_CMD_READY(ucIndex);

    /* ?D?????¡ä???¡é?D¦Ì?¡ä¨ª?¨®?? */
    if (MTA_AT_RESULT_NO_ERROR == pstResult->enResult)
    {
        /* 3¨¦1|¡ê?¨º?3?OK */
        ulResult    = AT_OK;
    }
    else
    {
        /* ¨º¡ì¡ã¨¹¡ê?¨º?3?ERROR */
        ulResult    = AT_ERROR;
    }

    gstAtSendData.usBufLen = 0;

    /* ¦Ì¡Â¨®?At_FormatResultData¡¤¡é?¨ª?¨¹¨¢??¨¢1? */
    At_FormatResultData(ucIndex, ulResult);

    return VOS_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_QryNvwrSecCtrlPara
 1|?¨¹?¨¨¨º?  : ^NWSECCTRL2¨¦?¡¥?¨¹¨¢?¡ä|¨¤¨ªo¡¥¨ºy
 ¨º?¨¨?2?¨ºy  : VOS_UINT8 ucIndex
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2015?¨º04??04¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : D???o¡¥¨ºy
*****************************************************************************/
VOS_UINT32 AT_QryNvwrSecCtrlPara(VOS_UINT8 ucIndex)
{
    TAF_NV_NVWR_SEC_CTRL_STRU           stNvwrSecCtrlNV;
    VOS_UINT32                          ulResult;

    /* 2?¨ºy3?¨º??¡¥ */
    ulResult = AT_ERROR;
    PS_MEM_SET(&stNvwrSecCtrlNV, 0x00, sizeof(stNvwrSecCtrlNV));

    /* DT??¡ã2¨¨?????NV */
    if (NV_OK == NV_ReadEx(MODEM_ID_0, en_NV_Item_NVWR_SEC_CTRL, &stNvwrSecCtrlNV, sizeof(stNvwrSecCtrlNV)))
    {
        ulResult = AT_OK;
        gstAtSendData.usBufLen = (VOS_UINT16)At_sprintf(AT_CMD_MAX_LEN,
                                                        (VOS_CHAR*)pgucAtSndCodeAddr,
                                                        (VOS_CHAR*)pgucAtSndCodeAddr,
                                                        "%s: %d",
                                                        g_stParseContext[ucIndex].pstCmdElement->pszCmdName,
                                                        stNvwrSecCtrlNV.ucSecType);
    }

    return ulResult;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_IsNVWRAllowedNvId
 1|?¨¹?¨¨¨º?  : ?D???¨¹¨¢?^NVWR?¡é^NVWREX?¨¹¡¤?DT??¡ä?NV_ID
 ¨º?¨¨?2?¨ºy  : usNvId
 ¨º?3?2?¨ºy  : ?T
 ¡¤¦Ì ?? ?¦Ì  : VOS_TRUE   -- ?¨ºD¨ªDT??
             VOS_FLASE  -- 2??¨ºD¨ªDT??
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2015?¨º04??04¨¨?
    ¡Á¡Â    ??   : l00198894
    DT???¨²¨¨Y   : D???o¡¥¨ºy
*****************************************************************************/
VOS_BOOL AT_IsNVWRAllowedNvId(VOS_UINT16 usNvId)
{
    TAF_NV_NVWR_SEC_CTRL_STRU           stNvwrSecCtrlNV;
    VOS_UINT8                           ucLoop;
    VOS_UINT8                           ucBlackListNum;

    /* 2?¨ºy3?¨º??¡¥ */
    PS_MEM_SET(&stNvwrSecCtrlNV, 0x00, sizeof(stNvwrSecCtrlNV));

    /* ?¨¢¨¨?¡ã2¨¨?????NV */
    if (NV_OK != NV_ReadEx(MODEM_ID_0, en_NV_Item_NVWR_SEC_CTRL, &stNvwrSecCtrlNV, sizeof(stNvwrSecCtrlNV)))
    {
        AT_ERR_LOG("AT_IsNVWRAllowedNvId: NV_ReadEx fail!");
        return VOS_FALSE;
    }

    switch (stNvwrSecCtrlNV.ucSecType)
    {
        case AT_NVWR_SEC_TYPE_OFF:
            return VOS_TRUE;

        case AT_NVWR_SEC_TYPE_ON:
            return VOS_FALSE;

        case AT_NVWR_SEC_TYPE_BLACKLIST:
            ucBlackListNum = (stNvwrSecCtrlNV.ucBlackListNum <= TAF_NV_BLACK_LIST_MAX_NUM) ?
                             stNvwrSecCtrlNV.ucBlackListNum : TAF_NV_BLACK_LIST_MAX_NUM;
            for (ucLoop = 0; ucLoop < ucBlackListNum; ucLoop++)
            {
                if (usNvId == stNvwrSecCtrlNV.ausBlackList[ucLoop])
                {
                    return VOS_FALSE;
                }
            }
            return VOS_TRUE;

        default:
            AT_ERR_LOG1("AT_IsNVWRAllowedNvId: Error SecType:", stNvwrSecCtrlNV.ucSecType);
            break;
    }

    return VOS_FALSE;
}

/*****************************************************************************
o¡¥ ¨ºy ??  :AT_AsciiToHex
1|?¨¹?¨¨¨º?  :¡Áa??¡Á?¡¤?¡ä???¨º?
¨º?¨¨?2?¨ºy  :

¨º?3?2?¨ºy  :?T
¡¤¦Ì ?? ?¦Ì  :VOS_OK    :¨º¡ì¡ã¨¹
           VOS_ERR   :3¨¦1|

DT??????  :
1. ¨¨?    ?¨²   : 2015?¨º07??23¨¨?
   ¡Á¡Â    ??   : z00316370
   DT???¨²¨¨Y   : Creat
*****************************************************************************/

VOS_UINT32 AT_AsciiToHex(
    VOS_UINT8                          *pucSrc,
    VOS_UINT8                          *pucDst
)
{

    if (( *pucSrc >= '0') && (*pucSrc <= '9')) /* the number is 0-9 */
    {
        *pucDst = (VOS_UINT8)(*pucSrc - '0');
    }
    else if ( (*pucSrc >= 'a') && (*pucSrc <= 'f') ) /* the number is a-f */
    {
        *pucDst = (VOS_UINT8)(*pucSrc - 'a') + 0x0a;
    }
    else if ( (*pucSrc >= 'A') && (*pucSrc <= 'F') ) /* the number is A-F */
    {
        *pucDst = (VOS_UINT8)(*pucSrc - 'A') + 0x0a;
    }
    else
    {
        return VOS_ERR;
    }

    return VOS_OK;
}

/*****************************************************************************
o¡¥ ¨ºy ??  :AT_AsciiToHexCode
1|?¨¹?¨¨¨º?  :¡Áa??¡Á?¡¤?¡ä???¨º?¡ê???D¨°,"1234"->0x3412
¨º?¨¨?2?¨ºy  :

¨º?3?2?¨ºy  :?T
¡¤¦Ì ?? ?¦Ì  :VOS_OK    :¨º¡ì¡ã¨¹
           VOS_ERR   :3¨¦1|

DT??????  :
1. ¨¨?    ?¨²   : 2015?¨º7??23¨¨?
   ¡Á¡Â    ??   : z00316370
   DT???¨²¨¨Y   : Creat
*****************************************************************************/

VOS_UINT32 AT_AsciiToHexCode_Revers(
    VOS_UINT8                          *pucSrc,
    VOS_UINT16                          usDataLen,
    VOS_UINT8                          *pucDst
)
{
    VOS_INT16                           sLoop1;
    VOS_UINT16                          usLoop2;
    VOS_UINT8                           ucTemp1;
    VOS_UINT8                           ucTemp2;
    VOS_UINT32                          ulRslt;

    sLoop1 = (VOS_INT16)(usDataLen - 1);
    for (usLoop2 = 0; sLoop1 >= 0; sLoop1--, usLoop2++)
    {
        ulRslt = AT_AsciiToHex(&(pucSrc[sLoop1]), &ucTemp1);
        if (VOS_ERR == ulRslt)
        {
            return VOS_ERR;
        }

        sLoop1--;

        ulRslt = AT_AsciiToHex(&(pucSrc[sLoop1]), &ucTemp2);
        if (VOS_ERR == ulRslt)
        {
            return VOS_ERR;
        }

        pucDst[usLoop2] = (VOS_UINT8)((ucTemp2 << 4) | ucTemp1);
    }

    return VOS_OK;
}

/*****************************************************************************
 o¡¥ ¨ºy ??  : AT_Hex2Ascii
 1|?¨¹?¨¨¨º?  : ??¨º?¨¢¨´????¨ºy¡Á?¡Á?¡¤?¡ä?¡Áa??3¨¦ASCII??¡À¨ª¨º?¦Ì?¨ºy¡Á?¡Á?¡¤?¡ä?,??D¨°,0x3412 --> "1234"
 ¨º?¨¨?2?¨ºy  : VOS_UINT8  aucHex[]¨º?????¨ºy¡Á?¡Á?¡¤?¡ä?¨º¡Á¦Ì??¡¤
             VOS_UINT32 ulLength      ¨º?????¨ºy¡Á?¡Á?¡¤?¡ä?3¡è?¨¨
 ¨º?3?2?¨ºy  : VOS_UINT8  aucAscii[]    ASCII??¡À¨ª¨º?¦Ì?¨ºy¡Á?¡Á?¡¤?¡ä?¨º¡Á¦Ì??¡¤
 ¡¤¦Ì ?? ?¦Ì  : VOS_UINT32 ¡Áa???¨¢1?: VOS_OK¡Áa??3¨¦1|¡ê?VOS_ERR¡Áa??¨º¡ì¡ã¨¹
 ¦Ì¡Â¨®?o¡¥¨ºy  :
 ¡À?¦Ì¡Âo¡¥¨ºy  :

 DT??¨¤¨²¨º¡¤      :
  1.¨¨?    ?¨²   : 2015?¨º7??18¨¨?
    ¡Á¡Â    ??   : z00316370
    DT???¨²¨¨Y   : D?¨¦¨²3¨¦o¡¥¨ºy

*****************************************************************************/
VOS_UINT32 AT_Hex2Ascii_Revers(
    VOS_UINT8                           aucHex[],
    VOS_UINT32                          ulLength,
    VOS_UINT8                           aucAscii[]
)
{
    VOS_INT32                           lLoopSrc;
    VOS_UINT32                          ulLoopDest;
    VOS_UINT8                           ucTemp;

    lLoopSrc = (VOS_INT32)(ulLength - 1);
    for (ulLoopDest = 0; lLoopSrc >= 0; lLoopSrc--, ulLoopDest++)
    {
        ucTemp = (aucHex[lLoopSrc]>>4) & 0x0F;
        if (ucTemp < 10)
        {
            /* 0~9 */
            aucAscii[ulLoopDest] = ucTemp + 0x30;
        }
        else
        {
            /* a~f */
            aucAscii[ulLoopDest] = ucTemp + 0x37;
        }

        ulLoopDest++;
        ucTemp = aucHex[lLoopSrc] & 0x0F;
        if (ucTemp < 10)
        {
            /* 0~9 */
            aucAscii[ulLoopDest] = ucTemp + 0x30;
        }
        else
        {
            /* a~f */
            aucAscii[ulLoopDest] = ucTemp + 0x37;
        }
    }

    return VOS_OK;
}





